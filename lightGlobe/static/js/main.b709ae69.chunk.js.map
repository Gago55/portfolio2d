{"version":3,"sources":["common/Error.tsx","redux/data.ts","redux/threeReducer.ts","components/common/common.tsx","assets/globeTextures/default.jpg","assets/globeTextures/light.jpg","assets/globeTextures/dark.png","assets/globeTextures/physical.jpg","redux/textureReducer.ts","components/common/ColorPicker.tsx","common/helpers.ts","components/Sidebar/Settings.tsx","assets/empty.png","components/Sidebar/CitiesList.tsx","components/Sidebar/CityDetails.tsx","components/Sidebar/Sidebar.tsx","assets/spriteAlpha.png","components/Three/NoteViewer.tsx","components/Three/ThreeProps.ts","components/Three/AddDotDialog.tsx","components/Three/Three.tsx","App.tsx","reportWebVitals.ts","redux/store.ts","index.tsx"],"names":["Error","props","Backdrop","sx","color","zIndex","theme","drawer","open","Typography","variant","message","encryptAES","text","key","process","CryptoJS","AES","encrypt","toString","decryptAES","decrypt","enc","Utf8","generateZipFile","domain","__SHA256","__SHA512","globeTextureUrl","Promise","res","rej","zip","JSZip","loadAsync","buildZip","data","file","files","includes","index","indexOf","length","globeTextureContent","substring","base64","generateAsync","type","content","link","document","createElement","href","download","window","dec","c","cameraDefaultPosition","position","x","y","z","target","zoom","isDevelopment","info","result","isError","hostname","location","JSON","parse","error","console","decryptData","dots","dotsProps","orbitSettings","cameraPosition","atmosphereColor","rendererColor","initState","errorMessage","dotSize","size","dotColor","globus","radius","material","MeshBasicMaterial","coords","selectedDotsIds","isSettingsOpen","enableRotate","enablePan","enableZoom","autoRotate","autoRotateSpeed","enableDamping","dampingFactor","noteMode","cameraAction","pointPickMode","actions","setDevelopmentMode","value","setDots","arr","addDot","removeDots","ids","resetDots","addCoord","setDotSize","setDotColor","setSelectedDotsIds","setIsSettingsOpen","setIsOrbitSettings","setNoteMode","setAtmosphereColor","setCameraAction","setCameraPosition","setRendererColor","setPointPickMode","threeReducer","state","action","filter","d","id","map","undefined","showMessage","enqueueSnackbar","duration","onClose","anchorOrigin","horizontal","vertical","autoHideDuration","Flex","children","column","fullWidth","centerX","centerY","Box","display","flexDirection","width","justifyContent","alignItems","TypeButton","title","selectedType","setType","Tooltip","style","height","cursor","border","borderRadius","onClick","React","cloneElement","viewBox","defaultProps","loader","TextureLoader","GlobeDefaultTextureUrl","GlobeDefaultTextureSrc","textureGallery","AltGlobeTextureSrc1","AltGlobeTextureSrc2","AltGlobeTextureSrc3","globeTexture","texture","load","src","backgroundSrc","globeTextures","setGlobeTexture","addGlobeTexture","setBackgroundSrc","textureReducer","body","backgroundImage","ColorPicker","useState","setOpen","handleClose","selectingEnabled","Paper","elevation","background","marginRight","needResetButton","square","handleResetClick","fontSize","Dialog","keepMounted","DialogContent","disableAlpha","alpha","deferred","onChange","handleColorSet","css","backgroundColor","getScreenPos","pos","camera","widthHalf","heightHalf","newPos","clone","project","top","left","blobToBase64","blob","resolve","_","reader","FileReader","onloadend","readAsDataURL","srcToBase64","fetch","then","r","dataUrl","cc","hint","obj","SpriteText2D","scale","set","connect","textureActions","downloadDialogOpen","setDownloadDialogOpen","clientDomain","setClientDomain","isPreparingFiles","setIsPreparingFiles","downloadElement","setDownloadElement","globeTextureChooseOpen","setGlobeTextureChooseOpen","selectedGlobeTexture","setSelectedGlobeTexture","useSnackbar","handleOrbitSettingChange","newSettings","handlePrepareFilesClick","encryptedData","stringify","globeTextureBase64","startsWith","downloadFunction","alert","IconButton","m","right","Fade","in","p","FormGroup","FormControlLabel","control","Checkbox","checked","e","label","gap","Slider","step","min","max","valueLabelDisplay","v","TextField","parseFloat","Divider","mt","Button","textAlign","marginTop","DialogTitle","palette","grey","CircularProgress","click","maxWidth","dividers","gridTemplateColumns","gridColumnGap","gridRowGap","input","accept","onchange","event","URL","createObjectURL","handleImgClick","htmlColor","t","alt","DialogActions","CitiesList","DataGrid","maxHeight","overflowY","autoHeight","hideFooter","columns","field","rows","dot","city","checkboxSelection","selectionModel","onSelectionModelChange","CityDetails","cities","every","globalDotSize","setSize","globalDotColor","setColor","note","setNote","globalNoteMode","useEffect","Slide","direction","padding","paddingBottom","mb","join","onChangeCommitted","FormControl","InputLabel","Select","labelId","MenuItem","newDots","sliderValue","setSliderValue","Autocomplete","options","getOptionLabel","filterSelectedOptions","renderInput","params","placeholder","Fab","NoteViewer","notes","updateDotsHintsPoses","innerWidth","innerHeight","className","transform","transition","borderLeft","borderRight","borderTop","mapDispatchToProps","AddDotDialog","setCity","setErrorMessage","coord","helperText","closeCallback","customDotsCount","lat","lng","country","Three","myDiv","frameId","scene","Scene","PerspectiveCamera","renderer","WebGLRenderer","antialias","preserveDrawingBuffer","orbit","OrbitControls","domElement","isOrbitPaused","composer","EffectComposer","outlinePass","OutlinePass","Vector2","renderPass","RenderPass","effectFXAA","ShaderPass","FXAAShader","raycater","Raycaster","mouse","isMouseDown","alreadyIntersected","hoveredDot","leapValue","needScale","alreadyScaling","globe","Mesh","SphereGeometry","globusRadius","globusMaterial","sprite","Sprite","checkPoint","Vector3","checkPlane","Plane","light","HemisphereLight","light2","PointLight","needRender","coordNeedConfirm","setNeedRender","saveStateInLocalStorage","localStorage","setItem","saveGlobeTextureInLocalStorage","init","rgb","slice","a","parseInt","setClearColor","Color","minPolarAngle","Math","PI","maxPolarAngle","lookAt","target0","position0","zoomO","reset","spriteAlpha","sTexture2","wrapS","RepeatWrapping","wrapT","offset","add","addDots","selectedObjects","SpriteMaterial","alphaMap","transparent","alphaTest","initOutline","renderScene","addGlitchEffect","forEach","geometry","parameters","opacity","visibleEdgeColor","edgeGlow","hiddenEdgeColor","edgeThickness","edgeStrength","addPass","R","getPosition","name","userData","visible","push","big","remove","dispose","latitude","longitude","lg","MathUtils","degToRad","lt","temp","cos","sin","reAssignNotesVisible","dProps","setState","rotateMultiplier","onMouseMove","parentElement","prevMouse","clientX","offsetLeft","clientWidth","clientY","offsetTop","clientHeight","deltaX","rotateY","setFromCamera","intersected","intersectObjects","object","lerpHoverdDot","toFixed","setScalar","requestAnimationFrame","onMouseDown","intersectObject","Object3D","point","parentObj","rotation","getWorldPosition","newCoord","child","i","noteEl","getElementById","line","Line3","intersectsLine","handleWindowResize","uniforms","resolution","aspect","updateProjectionMatrix","start","animate","stop","cancelAnimationFrame","removeEventListener","rotateSpeedMultiplier","lerp","renderSceneWithTimeout","time","setTimeout","render","update","addEventListener","this","button","THREE","getLatLng","f","log","tthis","appendChild","removeChild","prevProps","saveState","needsUpdate","ref","mount","ml","Component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","rootReducer","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","ReactDOM"],"mappings":"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","file":"static/js/main.b709ae69.chunk.js","sourcesContent":["import { Backdrop, Typography } from '@mui/material'\r\nimport React, { FC } from 'react'\r\n\r\ninterface IProps {\r\n    message: string\r\n}\r\n\r\nconst Error: FC<IProps> = props => {\r\n    return (\r\n        <Backdrop\r\n            sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1 }}\r\n            open\r\n        >\r\n            <Typography variant='h3'>{props.message}</Typography>\r\n        </Backdrop>\r\n    )\r\n}\r\n\r\nexport default Error","import CryptoJS from 'crypto-js'\r\nimport buildZip from '../assets/build.json'\r\nimport JSZip from 'jszip';\r\nimport { DotType, NoteModeType, OrbitSettingsType, CameraPositionType } from './threeReducer';\r\n\r\nexport const decryptData = (): any => {\r\n\r\n    const result = {\r\n        isError: true,\r\n        data: ''\r\n    }\r\n\r\n    // console.log(window.location.hostname)\r\n    try {\r\n        // @ts-ignore\r\n        const hostname = decryptAES(window.__SHA256)\r\n\r\n        if (window.location.hostname === hostname) {\r\n            // @ts-ignore\r\n            const data = JSON.parse(decryptAES(window.__SHA512, window.location.hostname))\r\n            result.isError = false\r\n            result.data = data\r\n        }\r\n        else {\r\n            result.isError = true\r\n            result.data = 'You bought your globe for ' + hostname\r\n        }\r\n\r\n        return result\r\n\r\n    } catch (error) {\r\n        console.error(error)\r\n\r\n        return result\r\n    }\r\n}\r\n\r\nexport const encryptAES = (text: string, key = process.env.REACT_APP_ENCRYPT_KEY || '') => {\r\n    return CryptoJS.AES.encrypt(text, key).toString()\r\n}\r\n\r\nexport const decryptAES = (text: string, key = process.env.REACT_APP_ENCRYPT_KEY || '') => {\r\n    return CryptoJS.AES.decrypt(text, key).toString(CryptoJS.enc.Utf8)\r\n}\r\n\r\nexport type AppDataType = {\r\n    orbitSettings: OrbitSettingsType\r\n    dotsProps: {\r\n        size: number\r\n        color: string\r\n        noteMode: NoteModeType\r\n    }\r\n    dots: DotType[]\r\n    cameraPosition: CameraPositionType\r\n    rendererColor: string\r\n    atmosphereColor: string\r\n}\r\n\r\nexport const encryptData = (domain: string, data: AppDataType) => {\r\n    return {\r\n        __SHA256: encryptAES(domain),\r\n        __SHA512: encryptAES(JSON.stringify(data), domain)\r\n    }\r\n}\r\n\r\nexport const generateZipFile = (domain: string, __SHA256: string, __SHA512: string, globeTextureUrl: string) => new Promise<HTMLAnchorElement>(async (res, rej) => {\r\n    try {\r\n\r\n        const zip = new JSZip()\r\n\r\n        // @ts-ignore\r\n        await zip.loadAsync(buildZip.data, {})\r\n            ;\r\n\r\n        zip.file('encryption.js',\r\n            `var __SHA256 = '${__SHA256}'\\nvar __SHA512 = '${__SHA512}'`\r\n        )\r\n\r\n\r\n        //find globeTexture fila and replace it\r\n        for (const key in zip.files) {\r\n            if (key.includes('globeTexture')) {\r\n                const index = globeTextureUrl.indexOf('base64,') + 'base64,'.length\r\n                const globeTextureContent = globeTextureUrl.substring(index)\r\n                // const extension = globeTextureUrl.slice(0, index).split('/')[1].split(';')[0]\r\n\r\n                zip.file(key,\r\n                    globeTextureContent, { base64: true }\r\n                )\r\n            }\r\n        }\r\n\r\n        const content = await zip.generateAsync({ type: \"base64\" })\r\n        const link = document.createElement(\"a\")\r\n        // console.log(content)\r\n        link.href = \"data:application/zip;base64,\" + content\r\n        link.download = \"globe_\" + domain + \".zip\"\r\n        res(link)\r\n        // // @ts-ignore   \r\n        // window.l = link\r\n        // // link.innerHTML = \"Click here to download the file\";\r\n\r\n    } catch (error) {\r\n        rej(error)\r\n    }\r\n})\r\n\r\n// @ts-ignore\r\nwindow.enc = encryptAES; window.dec = decryptAES; window.c = generateZipFile","import { ThunkAction } from \"redux-thunk\";\r\nimport { MeshBasicMaterial } from \"three\";\r\nimport { AppDataType, decryptData } from './data';\r\nimport { InferActionsType, StateType } from './store';\r\n\r\n// console.log(data);\r\n\r\nexport const cameraDefaultPosition = {\r\n    position: { x: 0, y: 4.9, z: 107 },\r\n    target: { x: 0, y: 4.9, z: 0 },\r\n    zoom: 1\r\n}\r\n\r\nconst isDevelopment = process.env.REACT_APP_MODE === 'development'\r\nconst info = isDevelopment ? { isError: false, data: {} } : decryptData()\r\nconst dots = isDevelopment ? (localStorage.getItem('dots') ? JSON.parse(localStorage.getItem('dots') || '[]') : []) : info.data.dots\r\nconst dotsProps = isDevelopment ? (localStorage.getItem('dotsProps') ? JSON.parse(localStorage.getItem('dotsProps') || '{}') : {\r\n    color: '#ff0000',\r\n    noteMode: 'hover',\r\n    size: .5\r\n}) : info.data.dotsProps\r\nconst orbitSettings = isDevelopment ? (localStorage.getItem('orbitSettings') ? JSON.parse(localStorage.getItem('orbitSettings') || '{}') : {\r\n    enableRotate: true,\r\n    enablePan: true,\r\n    enableZoom: true,\r\n    autoRotate: false,\r\n    autoRotateSpeed: 0.8,\r\n    enableDamping: false,\r\n    dampingFactor: 0.09\r\n}) : info.data.orbitSettings\r\nconst cameraPosition = isDevelopment ? (localStorage.getItem('cameraPosition') ? JSON.parse(localStorage.getItem('cameraPosition') || '{}') : cameraDefaultPosition) : info.data.cameraPosition\r\nconst atmosphereColor = isDevelopment ? (localStorage.getItem('atmosphereColor') || '#5B5B5B') : info.data.atmosphereColor\r\nconst rendererColor = isDevelopment ? (localStorage.getItem('rendererColor') || '#FFFFFF') : info.data.rendererColor\r\n\r\n\r\nconst initState = {\r\n    isDevelopment,\r\n    errorMessage: typeof info.data === 'object' ? '' : info.data,\r\n    dotSize: (isDevelopment ? dotsProps.size : (!info.isError ? dotsProps.size : .5)) as number,\r\n    dotColor: (isDevelopment ? dotsProps.color : (!info.isError ? dotsProps.color : '#ff0000')) as string,\r\n    globus: {\r\n        radius: 7,\r\n        material: new MeshBasicMaterial({})\r\n    },\r\n    dots: (isDevelopment ? dots : (!info.isError ? dots : [])) as DotType[],\r\n    coords: [\r\n        // { x: -4.925572173958176, y: 4.070167166536136, z: -2.790111089029987, big: true }, //California\r\n        // { x: -4.548722473556953, y: 4.4054755091342495, z: -2.9168949594706195 },\r\n        // { x: -4.29126190809062, y: 4.749051166639707, z: -2.7847893058792046 },\r\n        // { x: -4.0881639356565715, y: 5.068011562063356, z: -2.5021394429688333, big: true }, //Up of California\r\n        // { x: -6.369981999128443, y: 2.563476927027613, z: -1.2723615243860815 },\r\n        // { x: -6.103898641619363, y: 3.2451501008357684, z: 0.8385158877462027 },\r\n        // { x: -6.716723881281159, y: 0.7309080588759549, z: 1.7331534282807888 },\r\n        // { x: -5.7455924952400546, y: 3.9084883602255394, z: 0.48817995996898716 },\r\n        // { x: -5.569888376582187, y: 4.060909085568754, z: 1.1954900646601518 },\r\n        // { x: -5.220968463925661, y: 4.654071697151717, z: 0.051847007647392473, big: true }, //Chicago\r\n        // { x: -5.252401992620886, y: 4.5783142267740065, z: 0.6138107081584192 },\r\n        // { x: -5.148985871837386, y: 4.535583687657085, z: 1.3630322437565663, big: true }, // Philadelphia\r\n        // { x: -5.252493918610169, y: 4.5237523659217596, z: 0.9025930885040349 },\r\n        // { x: -5.101309281887806, y: 4.648983619211507, z: 1.1070866308729832 },\r\n        // { x: -5.685759803069119, y: 4.026454457956729, z: -0.5911586469003988 },\r\n        // { x: -5.223295351496665, y: 4.291965265474737, z: -1.7698317521362 },\r\n        // { x: -5.037462306723614, y: 4.682680567231889, z: -1.2835549198393976 },\r\n        // { x: -4.8787473251822675, y: 4.9880908659962415, z: -0.4414186601153638 },\r\n        // { x: 4.430646061327164, y: 4.158600382207761, z: -3.4575573827244765 },\r\n        // { x: 3.9820231474643872, y: 4.013980355261091, z: -4.107498884873245 },\r\n        // { x: 3.714598697719379, y: 4.149948559171688, z: -4.227454090950161, big: true }, //Tokyo\r\n        // { x: 6.584817931181017, y: 1.937011886810845, z: 1.2895450616507418 },\r\n        // { x: 6.58244210324548, y: 1.6890520548906767, z: 1.667215061277389 },\r\n        // { x: 6.504698554155112, y: 1.9947305036060885, z: 1.6202316208509306, big: true },//Karnataka\r\n        // { x: 5.2303864728836595, y: 2.956046216950342, z: 3.575169338859101, big: true }, //Dubai\r\n        // { x: 3.4151196547594855, y: 3.6412351557430163, z: 4.889807354225829 },\r\n        // { x: 2.0957409308831108, y: 4.288860721312279, z: 5.103878969629369 },\r\n        // { x: 2.033347808057014, y: 4.7553192938461155, z: 4.706841512572883 },\r\n        // { x: 1.456627323793754, y: 6.120205470128543, z: 3.066748861446857 },\r\n        // { x: 0.608073640034323, y: 6.088279476647534, z: 3.3935729613756895 },\r\n        // { x: 0.9492123342650665, y: 6.026747236912351, z: 3.4181949176592403 },\r\n        // { x: 1.3284549269665586, y: 4.638104111776607, z: 5.056455746149603, big: true },//Rome\r\n        // { x: 1.3738390529074918, y: 4.268195107214924, z: 5.359683221545885 },\r\n        // { x: -0.13981750042035612, y: 4.371461370368549, z: 5.45301535668496, big: true },//Barcelona\r\n        // { x: -0.3927849303206749, y: 4.408684794632251, z: 5.417690002483798 },\r\n        // { x: -0.04600659743261659, y: 5.488155163902547, z: 4.331494556937253, big: true },//London\r\n        // { x: -0.2192036301482191, y: 5.548123149155959, z: 4.254336768449651 },\r\n        // { x: -0.10749185622850232, y: 5.612260536638634, z: 4.171814419956142 },\r\n        // { x: -0.5401706008450289, y: 5.662731279490247, z: 4.0712783373999555 },\r\n        // { x: -0.2692135999605448, y: 5.840693533980053, z: 3.842155360443485 },\r\n        // { x: 0.46122504137479936, y: 4.857486247567413, z: 5.008874001971964 },\r\n        // { x: -0.006123006623166005, y: 5.266246236147655, z: 4.597324529352691 },\r\n        // { x: 0.1728307005284968, y: 5.214956965853125, z: 4.6553860104144205 },\r\n        // { x: 0.3762313729709401, y: 5.302995281549801, z: 4.54440277021114 },\r\n        // { x: 0.5737509487200718, y: 5.390302309435484, z: 4.419829759571956 },\r\n        // { x: 0.49341658305055136, y: 5.166407167735733, z: 4.68545083876677 },\r\n        // { x: 0.8197987369699988, y: 5.124324255176947, z: 4.692237103845212 }\r\n    ] as Array<CoordType>,\r\n    selectedDotsIds: [] as (number | string)[],\r\n    isSettingsOpen: true,\r\n    orbitSettings: (isDevelopment ? orbitSettings : (!info.isError ? orbitSettings : {\r\n        enableRotate: true,\r\n        enablePan: false,\r\n        enableZoom: false,\r\n        autoRotate: true,\r\n        autoRotateSpeed: 0.8,\r\n        enableDamping: false,\r\n        dampingFactor: 0.09\r\n    })) as OrbitSettingsType,\r\n    atmosphereColor: (isDevelopment ? atmosphereColor : (!info.isError ? atmosphereColor : '#5B5B5B')) as string,\r\n    noteMode: (isDevelopment ? dotsProps.noteMode : (!info.isError ? dotsProps.noteMode : 'hover')) as NoteModeType,\r\n    cameraAction: 'none' as CameraActionsType,\r\n    cameraPosition: (isDevelopment ? cameraPosition : (!info.isError ? cameraPosition : cameraDefaultPosition)) as CameraPositionType,\r\n    rendererColor: (isDevelopment ? rendererColor : (!info.isError ? rendererColor : '#FFFFFF')) as string,\r\n    pointPickMode: false\r\n}\r\n\r\nexport type CameraActionsType = 'save' | 'load' | 'reset' | 'none'\r\n\r\nexport type NoteModeType = 'always' | 'hover'\r\n\r\nexport type V3 = {\r\n    x: number\r\n    y: number\r\n    z: number\r\n}\r\n\r\nexport type CameraPositionType = {\r\n    target: V3\r\n    position: V3\r\n    zoom: number\r\n}\r\n\r\nexport type OrbitSettingsType = {\r\n    enableRotate: boolean\r\n    enablePan: boolean\r\n    enableZoom: boolean\r\n    autoRotate: boolean\r\n    autoRotateSpeed: number\r\n    enableDamping: boolean\r\n    dampingFactor: number\r\n}\r\n\r\nexport type CoordType = { x: number, y: number, z: number, big?: boolean }\r\n\r\nexport type DotType = {\r\n    id: number | string\r\n    city: string\r\n    country: string\r\n    lat: number\r\n    lng: number\r\n    position?: V3\r\n    size?: number\r\n    color?: string\r\n    note?: string\r\n    noteMode?: NoteModeType\r\n}\r\n\r\ntype InitStateType = typeof initState\r\n\r\nconst threeReducer = (state = initState, action: ActionsType): InitStateType => {\r\n    switch (action.type) {\r\n        case 'globe/three/SET_DEVELOPMENT_MODE':\r\n            return {\r\n                ...state,\r\n                isDevelopment: action.value\r\n            }\r\n        case 'globe/three/SET_DOTS':\r\n            return {\r\n                ...state,\r\n                dots: [...action.arr]\r\n            }\r\n        case 'globe/three/ADD_DOT':\r\n            return {\r\n                ...state,\r\n                dots: [...state.dots, action.value]\r\n            }\r\n        case 'globe/three/REMOVE_DOTS':\r\n            return {\r\n                ...state,\r\n                dots: state.dots.filter(d => !action.ids.includes(d.id)),\r\n                selectedDotsIds: []\r\n            }\r\n        case 'globe/three/RESET_DOTS':\r\n            return {\r\n                ...state,\r\n                dots: state.dots.map(d => action.ids.includes(d.id) ? ({ ...d, color: undefined, size: undefined, noteMode: undefined }) : ({ ...d })),\r\n                selectedDotsIds: []\r\n            }\r\n        case 'globe/three/ADD_COORD':\r\n            return {\r\n                ...state,\r\n                coords: [...state.coords, action.value]\r\n            }\r\n        case 'globe/three/SET_DOT_SIZE':\r\n            return {\r\n                ...state,\r\n                dotSize: action.value\r\n            }\r\n        case 'globe/three/SET_DOT_COLOR':\r\n            return {\r\n                ...state,\r\n                dotColor: action.value\r\n            }\r\n        case 'globe/three/SET_SELECTED_DOTS_IDS':\r\n            return {\r\n                ...state,\r\n                selectedDotsIds: [...action.arr]\r\n            }\r\n        case 'globe/three/SET_IS_SETTINGS_OPEN':\r\n            return {\r\n                ...state,\r\n                isSettingsOpen: action.value\r\n            }\r\n        case 'globe/three/SET_ORBIT_SETTINGS':\r\n            return {\r\n                ...state,\r\n                orbitSettings: { ...action.value }\r\n            }\r\n        case 'globe/three/SET_NOTE_MODE':\r\n            return {\r\n                ...state,\r\n                noteMode: action.value\r\n            }\r\n        case 'globe/three/SET_ATMOSPHERE_COLOR':\r\n            return {\r\n                ...state,\r\n                atmosphereColor: action.value\r\n            }\r\n        case 'globe/three/SET_CAMERA_ACTION':\r\n            return {\r\n                ...state,\r\n                cameraAction: action.value\r\n            }\r\n        case 'globe/three/SET_CAMERA_POSITION':\r\n            return {\r\n                ...state,\r\n                cameraPosition: { ...action.value }\r\n            }\r\n        case 'globe/three/SET_RENDERER_COLOR':\r\n            return {\r\n                ...state,\r\n                rendererColor: action.value\r\n            }\r\n        case 'globe/three/SET_POINT_PICK_MODE':\r\n            return {\r\n                ...state,\r\n                pointPickMode: action.value\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    setDevelopmentMode: (value: boolean) => ({ type: 'globe/three/SET_DEVELOPMENT_MODE', value } as const),\r\n    setDots: (arr: Array<DotType>) => ({ type: 'globe/three/SET_DOTS', arr } as const),\r\n    addDot: (value: DotType) => ({ type: 'globe/three/ADD_DOT', value } as const),\r\n    removeDots: (ids: (number | string)[]) => ({ type: 'globe/three/REMOVE_DOTS', ids } as const),\r\n    resetDots: (ids: (number | string)[]) => ({ type: 'globe/three/RESET_DOTS', ids } as const),\r\n    addCoord: (value: CoordType) => ({ type: 'globe/three/ADD_COORD', value } as const),\r\n    setDotSize: (value: number) => ({ type: 'globe/three/SET_DOT_SIZE', value } as const),\r\n    setDotColor: (value: string) => ({ type: 'globe/three/SET_DOT_COLOR', value } as const),\r\n    setSelectedDotsIds: (arr: (number | string)[]) => ({ type: 'globe/three/SET_SELECTED_DOTS_IDS', arr } as const),\r\n    setIsSettingsOpen: (value: boolean) => ({ type: 'globe/three/SET_IS_SETTINGS_OPEN', value } as const),\r\n    setIsOrbitSettings: (value: OrbitSettingsType) => ({ type: 'globe/three/SET_ORBIT_SETTINGS', value } as const),\r\n    setNoteMode: (value: NoteModeType) => ({ type: 'globe/three/SET_NOTE_MODE', value } as const),\r\n    setAtmosphereColor: (value: string) => ({ type: 'globe/three/SET_ATMOSPHERE_COLOR', value } as const),\r\n    setCameraAction: (value: CameraActionsType) => ({ type: 'globe/three/SET_CAMERA_ACTION', value } as const),\r\n    setCameraPosition: (value: CameraPositionType) => ({ type: 'globe/three/SET_CAMERA_POSITION', value } as const),\r\n    setRendererColor: (value: string) => ({ type: 'globe/three/SET_RENDERER_COLOR', value } as const),\r\n    setPointPickMode: (value: boolean) => ({ type: 'globe/three/SET_POINT_PICK_MODE', value } as const),\r\n}\r\n\r\nexport type ActionsType = InferActionsType<typeof actions>\r\ntype ThunkType = ThunkAction<Promise<void>, StateType, unknown, ActionsType>\r\n\r\nexport default threeReducer","import styled from '@emotion/styled';\r\nimport { Box, BoxProps, SxProps, Tooltip } from '@mui/material';\r\nimport Switch from '@mui/material/Switch';\r\nimport { OptionsObject, SnackbarKey, SnackbarMessage, VariantType } from \"notistack\"\r\nimport React from 'react';\r\nimport { FC, ReactComponentElement, ReactElement } from 'react';\r\n\r\nexport const Shift = () => <Box sx={{ flexGrow: 1 }} />\r\n\r\nexport type EnqueueSnackbarType = (message: SnackbarMessage, options?: OptionsObject | undefined) => SnackbarKey\r\n\r\nexport const showMessage = (\r\n    enqueueSnackbar: EnqueueSnackbarType,\r\n    message: string,\r\n    variant: VariantType = 'error',\r\n    duration: number = 7000,\r\n    onClose: () => void = () => { }\r\n) => {\r\n    enqueueSnackbar(message, {\r\n        variant,\r\n        anchorOrigin: {\r\n            horizontal: 'center',\r\n            vertical: 'bottom'\r\n        },\r\n        autoHideDuration: duration,\r\n        onClose\r\n    })\r\n}\r\n\r\n//Flex\r\n\r\ninterface IFlexProps extends BoxProps {\r\n    children: JSX.Element | JSX.Element[]\r\n    column?: boolean\r\n    fullWidth?: boolean\r\n    centerX?: boolean\r\n    centerY?: boolean\r\n    sx?: SxProps\r\n\r\n}\r\n\r\nexport const Flex = ({ children, column, fullWidth, centerX, centerY, sx, ...props }: IFlexProps) => {\r\n\r\n    return <Box sx={{\r\n        display: 'flex',\r\n        flexDirection: column ? 'column' : undefined,\r\n        width: fullWidth ? 1 : undefined,\r\n        ...(!column\r\n            ? {\r\n                justifyContent: centerX ? 'center' : undefined,\r\n                alignItems: centerY ? 'center' : undefined,\r\n            }\r\n            : {\r\n                justifyContent: centerY ? 'center' : undefined,\r\n                alignItems: centerX ? 'center' : undefined,\r\n            }),\r\n        ...sx\r\n    }}\r\n        {...props}\r\n    >\r\n        {children}\r\n    </Box >\r\n}\r\n\r\n// /Flex\r\n\r\n\r\nconst defaultTypeButtonProps = {\r\n    width: 100,\r\n    height: 100\r\n}\r\n\r\ntype ButtonPropsType = {\r\n    title?: string\r\n    selectedType: string\r\n    type: string\r\n    children: JSX.Element\r\n\r\n    width?: number\r\n    height?: number\r\n\r\n    setType(type: string): void\r\n} & typeof defaultTypeButtonProps\r\n\r\nexport const TypeButton = ({ title, selectedType, type, children, setType, ...props }: ButtonPropsType) => {\r\n\r\n    return <Tooltip title={title}>\r\n        <Box\r\n            style={{\r\n                display: 'flex',\r\n                justifyContent: 'center',\r\n                alignItems: 'center',\r\n                height: props.height,\r\n                width: props.width,\r\n                cursor: 'pointer',\r\n                border: `${selectedType === type ? 4 : 2}px solid ${selectedType === type ? '#3f51b5' : '#616161'}`,\r\n                borderRadius: 8,\r\n            }}\r\n\r\n            onClick={() => {\r\n                setType(type)\r\n            }}\r\n        >\r\n            {/* <Box\r\n                style={{\r\n                    height: '100%',\r\n                    width: '100%',\r\n\r\n                }}\r\n            > */}\r\n            {React.cloneElement(children, {\r\n                width: \"100%\",\r\n                height: \"100%\",\r\n                viewBox: \"0 0 100 100\",\r\n\r\n            })}\r\n            {/* </Box> */}\r\n        </Box>\r\n    </Tooltip>\r\n}\r\n\r\nTypeButton.defaultProps = defaultTypeButtonProps\r\n","export default __webpack_public_path__ + \"static/media/default.5e9e89a0.jpg\";","export default __webpack_public_path__ + \"static/media/light.fef2598b.jpg\";","export default __webpack_public_path__ + \"static/media/dark.51613af7.png\";","export default __webpack_public_path__ + \"static/media/physical.9ed55fc0.jpg\";","import { TextureLoader, Texture } from 'three'\r\nimport { ThunkAction } from 'redux-thunk'\r\nimport { InferActionsType, StateType } from './store'\r\nimport GlobeDefaultTextureSrc from '../assets/globeTextures/default.jpg'\r\nimport AltGlobeTextureSrc1 from '../assets/globeTextures/light.jpg'\r\nimport AltGlobeTextureSrc2 from '../assets/globeTextures/dark.png'\r\nimport AltGlobeTextureSrc3 from '../assets/globeTextures/physical.jpg'\r\n\r\nconst isDevelopment = process.env.REACT_APP_MODE === 'development'\r\n\r\nconst loader = new TextureLoader()\r\n\r\nconst GlobeDefaultTextureUrl = isDevelopment ? (localStorage.getItem('globeTexture') || GlobeDefaultTextureSrc) : GlobeDefaultTextureSrc\r\nconst GlobeDefaultTexture = loader.load(GlobeDefaultTextureUrl)\r\n\r\nconst textureGallery = [\r\n    GlobeDefaultTextureSrc,\r\n    AltGlobeTextureSrc1,\r\n    AltGlobeTextureSrc2,\r\n    AltGlobeTextureSrc3\r\n]\r\n\r\nexport type GlobeTextureType = {\r\n    texture: Texture\r\n    src: string\r\n}\r\n\r\nconst initState = {\r\n    globeTexture: { texture: GlobeDefaultTexture, src: GlobeDefaultTextureUrl } as GlobeTextureType,\r\n    backgroundSrc: '',\r\n    globeTextures: [\r\n        (!textureGallery.includes(GlobeDefaultTextureUrl) ? GlobeDefaultTextureUrl : ''),\r\n        ...textureGallery\r\n    ].filter(src => src !== '')\r\n}\r\n\r\ntype InitStateType = typeof initState\r\n\r\nconst textureReducer = (state = initState, action: ActionsType): InitStateType => {\r\n    switch (action.type) {\r\n        case 'globe/texture/SET_BACKGROUND_SRC':\r\n            document.body.style.backgroundImage = `url(${action.value})`\r\n            return {\r\n                ...state,\r\n                backgroundSrc: action.value\r\n            }\r\n        case 'globe/texture/SET_GLOBE_TEXTURE':\r\n            return {\r\n                ...state,\r\n                globeTexture: {\r\n                    texture: loader.load(action.src),\r\n                    src: action.src\r\n                }\r\n            }\r\n        case 'globe/texture/ADD_GLOBE_TEXTURE':\r\n            return {\r\n                ...state,\r\n                globeTextures: [action.src, ...state.globeTextures]\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    // setGlobeTexture: (value: Texture) => ({ type: 'globe/texture/SET_GLOBE_TEXTURE', value } as const),\r\n    setGlobeTexture: (src: string) => ({ type: 'globe/texture/SET_GLOBE_TEXTURE', src } as const),\r\n    addGlobeTexture: (src: string) => ({ type: 'globe/texture/ADD_GLOBE_TEXTURE', src } as const),\r\n    setBackgroundSrc: (value: string) => ({ type: 'globe/texture/SET_BACKGROUND_SRC', value } as const),\r\n}\r\n\r\nexport type ActionsType = InferActionsType<typeof actions>\r\ntype ThunkType = ThunkAction<Promise<void>, StateType, unknown, ActionsType>\r\n\r\nexport default textureReducer","import ResetIcon from '@mui/icons-material/Replay'\r\nimport { Box, Dialog, DialogContent, Paper, Tooltip } from '@mui/material'\r\nimport { ColorBox } from 'mui-color'\r\nimport { useState } from 'react'\r\n\r\n\r\nconst defaultProps = {\r\n    size: 65,\r\n    alpha: false,\r\n    needResetButton: false,\r\n    handleResetClick: () => { },\r\n\r\n}\r\n\r\ntype IProps = {\r\n    color: string\r\n\r\n    handleColorSet(value: string): void\r\n\r\n    size?: number\r\n    alpha?: boolean\r\n    needResetButton?: boolean\r\n    handleResetClick?: () => void\r\n} & typeof defaultProps\r\n\r\n\r\nconst ColorPicker = (props: IProps) => {\r\n\r\n    const [open, setOpen] = useState(false)\r\n\r\n    const handleClose = () => {\r\n        setOpen(false)\r\n\r\n        // @ts-ignore\r\n        window.selectingEnabled = true\r\n    }\r\n\r\n    const handleOpen = () => {\r\n        setOpen(true)\r\n\r\n        // @ts-ignore\r\n        window.selectingEnabled = false\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Box style={{\r\n                display: 'flex',\r\n                justifyContent: 'space-around'\r\n            }} >\r\n                <Tooltip title={props.color}>\r\n                    <Paper\r\n                        elevation={4}\r\n                        style={{\r\n                            width: props.size,\r\n                            height: props.size,\r\n                            background: props.color,\r\n                            borderRadius: 5,\r\n                            border: \"1px solid rgba(0,0,0,0.1)\",\r\n                            marginRight: props.needResetButton ? 10 : 0\r\n                        }}\r\n                        onClick={handleOpen}\r\n                    />\r\n                </Tooltip>\r\n                {props.needResetButton &&\r\n                    <Tooltip title='Reset Color'>\r\n                        <Paper\r\n                            square\r\n                            style={{\r\n                                width: props.size,\r\n                                display: 'flex',\r\n                                background: '#e0e0e0',\r\n                                borderRadius: 5,\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center'\r\n                            }}\r\n                            onClick={props.handleResetClick}\r\n                        >\r\n                            <ResetIcon style={{ fontSize: 40 }} />\r\n                        </Paper>\r\n                    </Tooltip>\r\n                }\r\n            </Box >\r\n\r\n            <Dialog\r\n                open={open}\r\n                keepMounted\r\n                onClose={handleClose}\r\n            >\r\n                <DialogContent>\r\n                    <ColorBox\r\n                        value={props.color}\r\n                        disableAlpha={!props.alpha}\r\n                        deferred\r\n                        onChange={(c) => { props.handleColorSet(c.css.backgroundColor as string); handleClose() }}\r\n                    />\r\n                </DialogContent>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n\r\nColorPicker.defaultProps = defaultProps\r\n\r\nexport default ColorPicker","\r\nimport { Vector3, PerspectiveCamera } from 'three'\r\nimport { MeshText2D } from 'three-text2d'\r\nimport { SpriteText2D } from 'three-text2d/lib/SpriteText2D'\r\nimport { Text2D } from 'three-text2d/lib/Text2D'\r\n\r\nexport const getScreenPos = (pos: Vector3, camera: PerspectiveCamera, width: number, height: number) => {\r\n    const widthHalf = width / 2\r\n    const heightHalf = height / 2\r\n\r\n    const newPos = pos.clone().project(camera)\r\n    newPos.x = (newPos.x * widthHalf) + widthHalf\r\n    newPos.y = - (newPos.y * heightHalf) + heightHalf\r\n\r\n    return {\r\n        top: newPos.y,\r\n        left: newPos.x\r\n    }\r\n}\r\n\r\nexport const createHintObject = (hint: string) => {\r\n    const obj = new SpriteText2D(hint)\r\n    obj.scale.set(.01, .01, .01)\r\n    return obj\r\n}\r\n\r\nexport function blobToBase64(blob: Blob) {\r\n    return new Promise((resolve, _) => {\r\n        const reader = new FileReader();\r\n        reader.onloadend = () => resolve(reader.result);\r\n        reader.readAsDataURL(blob);\r\n    });\r\n}\r\n\r\nexport const srcToBase64 = async (src: string) => {\r\n    const blob = await fetch(src).then(r => r.blob())\r\n    const dataUrl = await blobToBase64(blob) as string\r\n    return dataUrl\r\n}\r\n\r\n// @ts-ignore\r\nwindow.cc = createHintObject","import RemoveIcon from '@mui/icons-material/Remove'\r\nimport SettingsIcon from '@mui/icons-material/Settings'\r\nimport { Checkbox, Tooltip, Divider, Fade, FormControlLabel, FormGroup, IconButton, Paper, Slider, Button, Dialog, DialogTitle, DialogContent, Typography, Box, TextField, DialogActions } from '@mui/material'\r\nimport { FC, useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { StateType } from '../../redux/store'\r\nimport { actions, CameraActionsType, CameraPositionType, DotType, NoteModeType, OrbitSettingsType } from './../../redux/threeReducer'\r\nimport CloseIcon from '@mui/icons-material/Close'\r\nimport CircularProgress from '@mui/material/CircularProgress'\r\nimport { Flex, showMessage, TypeButton } from '../common/common'\r\nimport { useSnackbar } from 'notistack'\r\nimport { encryptData, generateZipFile } from '../../redux/data'\r\nimport { Texture, TextureLoader } from 'three'\r\nimport emptyTextureSrc from '../../assets/empty.png'\r\nimport { actions as textureActions, GlobeTextureType } from '../../redux/textureReducer'\r\nimport ColorPicker from '../common/ColorPicker'\r\nimport ImageIcon from '@mui/icons-material/Image';\r\nimport UploadFileIcon from '@mui/icons-material/UploadFile';\r\nimport { srcToBase64 } from '../../common/helpers'\r\n\r\ninterface IProps {\r\n    open: boolean\r\n    orbitSettings: OrbitSettingsType\r\n    dots: DotType[]\r\n    dotSize: number\r\n    dotColor: string\r\n    globeTexture: GlobeTextureType\r\n    globeTextures: string[]\r\n    atmosphereColor: string\r\n    rendererColor: string\r\n    noteMode: NoteModeType\r\n    cameraPosition: CameraPositionType\r\n\r\n    setOpen(value: boolean): void\r\n    setIsOrbitSettings(value: OrbitSettingsType): void\r\n    setBackgroundSrc(src: string): void\r\n    addGlobeTexture(src: string): void\r\n    setGlobeTexture(src: string): void\r\n    setAtmosphereColor(value: string): void\r\n    setRendererColor(value: string): void\r\n    setCameraAction(value: CameraActionsType): void\r\n}\r\n\r\nconst Settings: FC<IProps> = props => {\r\n\r\n    const [downloadDialogOpen, setDownloadDialogOpen] = useState(false)\r\n    const [clientDomain, setClientDomain] = useState('')\r\n    const [isPreparingFiles, setIsPreparingFiles] = useState(false)\r\n    const [downloadElement, setDownloadElement] = useState<undefined | HTMLAnchorElement>(undefined)\r\n    const [globeTextureChooseOpen, setGlobeTextureChooseOpen] = useState(false)\r\n    const [selectedGlobeTexture, setSelectedGlobeTexture] = useState(props.globeTexture.src)\r\n\r\n    const { enqueueSnackbar } = useSnackbar()\r\n\r\n\r\n    const handleDrawerClose = () => {\r\n        props.setOpen(false)\r\n    }\r\n\r\n    const handleOrbitSettingChange = (value: number | boolean, action: 'rotate' | 'zoom' | 'pan' | 'autoRotate' | 'enableDamping' | 'autoRotateSpeed' | 'dampingFactor') => {\r\n        const newSettings = { ...props.orbitSettings }\r\n\r\n        switch (action) {\r\n            case 'rotate': newSettings.enableRotate = value as boolean; break\r\n            case 'zoom': newSettings.enableZoom = value as boolean; break\r\n            case 'pan': newSettings.enablePan = value as boolean; break\r\n            case 'autoRotate': newSettings.autoRotate = value as boolean; break\r\n            case 'enableDamping': newSettings.enableDamping = value as boolean; break\r\n            case 'autoRotateSpeed': newSettings.autoRotateSpeed = value as number; break\r\n            case 'dampingFactor': newSettings.dampingFactor = value as number; break\r\n\r\n            default: break\r\n        }\r\n\r\n        props.setIsOrbitSettings(newSettings)\r\n    }\r\n\r\n    const handleImgClick = (action: 'globe' | 'background') => {\r\n        const input = document.createElement('input')\r\n        input.type = 'file'\r\n        input.accept = 'image/*'\r\n\r\n        input.onchange = async (event) => {\r\n            // @ts-ignore \r\n            const files = event.target.files\r\n\r\n            if (!files) return\r\n\r\n            const file = files[0]\r\n\r\n            const src = window.URL.createObjectURL(file)\r\n\r\n            if (action === 'globe') {\r\n                props.addGlobeTexture(src)\r\n            }\r\n            else if (action === 'background')\r\n                props.setBackgroundSrc(src)\r\n\r\n        }\r\n        input.click()\r\n    }\r\n\r\n    const handlePrepareFilesClick = async () => {\r\n        if (clientDomain === '') {\r\n            showMessage(enqueueSnackbar, \"Domain can't be empty\")\r\n            return\r\n        }\r\n\r\n        setIsPreparingFiles(true)\r\n\r\n        try {\r\n            const encryptedData = encryptData(clientDomain,\r\n                {\r\n                    dots: props.dots,\r\n                    orbitSettings: props.orbitSettings,\r\n                    dotsProps: { color: props.dotColor, size: props.dotSize, noteMode: props.noteMode },\r\n                    cameraPosition: props.cameraPosition,\r\n                    rendererColor: props.rendererColor,\r\n                    atmosphereColor: props.atmosphereColor\r\n                })\r\n\r\n            let globeTextureBase64 = props.globeTexture.src\r\n\r\n            if (!globeTextureBase64.startsWith('data')) {//means that src is not base64\r\n                globeTextureBase64 = await srcToBase64(globeTextureBase64)\r\n            }\r\n\r\n            const downloadFunction = await generateZipFile(clientDomain, encryptedData.__SHA256, encryptedData.__SHA512, globeTextureBase64)\r\n            setDownloadElement(downloadFunction)\r\n            showMessage(enqueueSnackbar, \"Your globe file is ready\", 'success')\r\n            setIsPreparingFiles(false)\r\n        } catch (error) {\r\n            alert(error)\r\n            setIsPreparingFiles(false)\r\n        }\r\n    }\r\n\r\n    return (<>\r\n        {!props.open && <IconButton sx={{ m: 2, position: 'absolute', top: 0, right: 0 }} onClick={() => { props.setOpen(true) }}>\r\n            <SettingsIcon />\r\n        </IconButton>\r\n        }\r\n        <Fade in={props.open}>\r\n            <Paper sx={{\r\n                p: 3,\r\n                m: 2,\r\n                position: 'absolute',\r\n                top: 0,\r\n                right: 0,\r\n                width: 250\r\n            }}>\r\n                <IconButton sx={{ position: 'absolute', top: 0, right: 0 }} onClick={handleDrawerClose}>\r\n                    <RemoveIcon />\r\n                </IconButton>\r\n\r\n                <FormGroup>\r\n                    <FormControlLabel control={<Checkbox checked={props.orbitSettings.enableRotate} onChange={e => { handleOrbitSettingChange(e.target.checked, 'rotate') }} />} label=\"Enable Rotate\" />\r\n                    <FormControlLabel control={<Checkbox checked={props.orbitSettings.enableZoom} onChange={e => { handleOrbitSettingChange(e.target.checked, 'zoom') }} />} label=\"Enable Zoom\" />\r\n                    <FormControlLabel control={<Checkbox checked={props.orbitSettings.enablePan} onChange={e => { handleOrbitSettingChange(e.target.checked, 'pan') }} />} label=\"Enable Pan\" />\r\n                    <FormControlLabel control={<Checkbox checked={props.orbitSettings.autoRotate} onChange={e => { handleOrbitSettingChange(e.target.checked, 'autoRotate') }} />} label=\"Auto Rotate\" />\r\n                    {/* <FormControlLabel\r\n                        control={\r\n                            <Slider\r\n                                sx={{ ml: 6, mr: 2 }}\r\n                                value={props.orbitSettings.autoRotateSpeed}\r\n                                step={.1}\r\n                                // marks\r\n                                min={-5}\r\n                                max={5}\r\n                                valueLabelDisplay='auto'\r\n                                onChange={(e, v) => {\r\n                                    if (typeof v == 'number')\r\n                                        handleOrbitSettingChange(v, 'autoRotateSpeed')\r\n                                }}\r\n                            />}\r\n                        label=\"Speed\" /> */}\r\n                    <Flex fullWidth centerY sx={{ justifyContent: \"space-between\", gap: 2 }}>\r\n                        <Slider\r\n                            style={{ width: 180 }}\r\n                            step={.1}\r\n                            // marks\r\n                            min={-5}\r\n                            max={5}\r\n                            value={props.orbitSettings.autoRotateSpeed}\r\n                            valueLabelDisplay='auto'\r\n                            onChange={(e, v) => {\r\n                                if (typeof v == 'number')\r\n                                    handleOrbitSettingChange(v, 'autoRotateSpeed')\r\n                            }}\r\n                        />\r\n\r\n\r\n                        <TextField\r\n                            style={{ width: 70 }}\r\n                            label='Speed'\r\n                            variant='outlined'\r\n                            size='small'\r\n                            type='number'\r\n                            value={props.orbitSettings.autoRotateSpeed}\r\n                            onChange={(e) => {\r\n                                let value = parseFloat(e.target.value)\r\n\r\n                                handleOrbitSettingChange(value, 'autoRotateSpeed')\r\n                            }}\r\n                        />\r\n                    </Flex>\r\n                    {/*<FormControlLabel control={<Checkbox checked={props.orbitSettings.enableDamping} onChange={e => { handleOrbitSettingChange(e.target.checked, 'enableDamping') }} />} label=\"Enable Damping\" />\r\n                    <FormControlLabel\r\n                        control={\r\n                            <Slider\r\n                                sx={{ ml: 6, mr: 2 }}\r\n                                value={props.orbitSettings.dampingFactor}\r\n                                step={.01}\r\n                                // marks\r\n                                min={0.01}\r\n                                max={0.15}\r\n                                valueLabelDisplay='auto'\r\n                                onChange={(e, v) => {\r\n                                    if (typeof v == 'number')\r\n                                        handleOrbitSettingChange(v, 'dampingFactor')\r\n                                }}\r\n                            />}\r\n                        label=\"Factor\" />\r\n                     */}\r\n\r\n                </FormGroup>\r\n\r\n                <Divider sx={{ mt: 2 }} />\r\n                <Flex column centerX centerY sx={{ mt: 1 }}>\r\n                    <Typography >Camera Position</Typography>\r\n\r\n                    <Flex sx={{ mt: 1, gap: '5px' }}>\r\n                        <Tooltip title='Save current camera position'>\r\n                            <Button variant='contained' onClick={() => props.setCameraAction('save')}>Fix</Button>\r\n                        </Tooltip>\r\n\r\n                        <Tooltip title='Move to saved camera position'>\r\n                            <Button variant='contained' onClick={() => props.setCameraAction('load')}>To Fixed</Button>\r\n                        </Tooltip>\r\n\r\n                        <Tooltip title='Reset current and saved camera positions to app default'>\r\n                            <Button variant='contained' onClick={() => props.setCameraAction('reset')}>Reset</Button>\r\n                        </Tooltip>\r\n                    </Flex>\r\n                </Flex>\r\n\r\n                <Divider sx={{ mt: 2 }} />\r\n\r\n                <Flex sx={{ mt: 2, justifyContent: 'space-evenly' }}>\r\n                    <Box sx={{ width: '40%', textAlign: 'center' }} onClick={() => { setGlobeTextureChooseOpen(true) }}>\r\n                        <img style={{ height: 50, borderRadius: 5, border: '2px solid black' }} src={props.globeTexture.src ? props.globeTexture.src : emptyTextureSrc}></img>\r\n                        <Typography>Globe Texture</Typography>\r\n                    </Box>\r\n                    <Box sx={{ width: '40%', textAlign: 'center' }}  >\r\n                        {/* <img style={{ height: 50, borderRadius: 5, border: '2px solid black' }} src={props.backgroundSrc || emptyTextureSrc}></img> */}\r\n                        <ColorPicker size={50} alpha color={props.rendererColor} handleColorSet={props.setRendererColor} />\r\n                        <Typography sx={{ marginTop: '5px' }}>Background</Typography>\r\n                    </Box>\r\n                </Flex>\r\n                {/* <Divider sx={{ mt: 2 }} /> */}\r\n\r\n                <Flex centerY sx={{ mt: 2, justifyContent: 'space-evenly' }}>\r\n                    <Typography>Globe Atmosphere Color</Typography>\r\n                    <ColorPicker size={40} color={props.atmosphereColor} handleColorSet={props.setAtmosphereColor} />\r\n                </Flex>\r\n\r\n                <Divider sx={{ mt: 2 }} />\r\n                <Flex centerX sx={{ mt: 1 }}>\r\n                    <Button onClick={() => { setDownloadDialogOpen(true) }}>Download</Button>\r\n                </Flex>\r\n            </Paper>\r\n        </Fade>\r\n        <Dialog\r\n            open={downloadDialogOpen}\r\n        // style={{ width: 500 }}\r\n        >\r\n            <DialogTitle >\r\n                Download your globe\r\n\r\n                <IconButton\r\n                    onClick={() => { setDownloadDialogOpen(false) }}\r\n                    sx={{\r\n                        position: 'absolute',\r\n                        right: 8,\r\n                        top: 8,\r\n                        color: (theme) => theme.palette.grey[500],\r\n                    }}\r\n                >\r\n                    <CloseIcon />\r\n                </IconButton>\r\n            </DialogTitle>\r\n\r\n            <DialogContent>\r\n                <Typography>To download you globe project files you need to write domain of your site</Typography>\r\n                <Typography>Write your domain carefully, because your globe will not work on any other domain than the one you write below!</Typography>\r\n                <Flex sx={{ mt: 2, gap: 2 }}>\r\n                    <TextField\r\n                        title='Domain'\r\n                        sx={{ width: 200 }}\r\n                        size='small'\r\n                        value={clientDomain}\r\n                        onChange={(e) => { setClientDomain(e.target.value) }}\r\n                    />\r\n                    {\r\n                        isPreparingFiles\r\n                            ? <CircularProgress></CircularProgress>\r\n                            : !!downloadElement\r\n                                ? <Button variant='contained' onClick={() => { downloadElement.click() }}>Download</Button>\r\n                                : <Button variant='contained' onClick={handlePrepareFilesClick}>Prepare Files</Button>\r\n                    }\r\n                </Flex>\r\n            </DialogContent>\r\n        </Dialog>\r\n        <Dialog\r\n            maxWidth={'lg'}\r\n            open={globeTextureChooseOpen}\r\n        >\r\n            <DialogTitle>Choose Texture</DialogTitle>\r\n            <DialogContent dividers>\r\n                <Box sx={{ display: 'grid', gridTemplateColumns: 'auto auto auto auto', gridColumnGap: 5, gridRowGap: 15 }}>\r\n                    <Flex centerX centerY sx={{ width: 200, height: 100, backgroundColor: '#bfbfbf', cursor: 'pointer' }}\r\n                        onClick={() => { handleImgClick('globe') }}\r\n                    >\r\n                        <UploadFileIcon htmlColor='#ffffff' />\r\n                    </Flex>\r\n                    {\r\n                        props.globeTextures.map(t =>\r\n                            <TypeButton\r\n                                key={t}\r\n                                width={200}\r\n                                type={t}\r\n                                selectedType={selectedGlobeTexture}\r\n                                setType={(type: string) => { setSelectedGlobeTexture(type) }}\r\n                            >\r\n                                <img src={t} alt={t} style={{ borderRadius: 8 }} />\r\n                            </TypeButton>)\r\n                    }\r\n                </Box>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={() => { setGlobeTextureChooseOpen(false) }}>\r\n                    Cancel\r\n                </Button>\r\n                <Button onClick={() => {\r\n                    if (selectedGlobeTexture && props.globeTextures.includes(selectedGlobeTexture)) {\r\n                        props.setGlobeTexture(selectedGlobeTexture)\r\n                    }\r\n                    setGlobeTextureChooseOpen(false)\r\n                }}>Ok</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state: StateType) => ({\r\n    open: state.threeReducer.isSettingsOpen,\r\n    orbitSettings: state.threeReducer.orbitSettings,\r\n    dots: state.threeReducer.dots,\r\n    dotSize: state.threeReducer.dotSize,\r\n    dotColor: state.threeReducer.dotColor,\r\n    atmosphereColor: state.threeReducer.atmosphereColor,\r\n    rendererColor: state.threeReducer.rendererColor,\r\n    globeTexture: state.textureReducer.globeTexture,\r\n    globeTextures: state.textureReducer.globeTextures,\r\n    noteMode: state.threeReducer.noteMode,\r\n    cameraPosition: state.threeReducer.cameraPosition,\r\n})\r\n\r\nexport default connect(mapStateToProps, {\r\n    setOpen: actions.setIsSettingsOpen,\r\n    setIsOrbitSettings: actions.setIsOrbitSettings,\r\n    setAtmosphereColor: actions.setAtmosphereColor,\r\n    setBackgroundSrc: textureActions.setBackgroundSrc,\r\n    setGlobeTexture: textureActions.setGlobeTexture,\r\n    addGlobeTexture: textureActions.addGlobeTexture,\r\n    setCameraAction: actions.setCameraAction,\r\n    setRendererColor: actions.setRendererColor,\r\n})(Settings) ","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK8AAABnCAAAAABTQk1wAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAHdElNRQfnARoPNQ0SjebnAAAAm0lEQVR42u3WsQ2AQBADwQNRGKXTGQSQOjQCaTZ5XTb6yMs5MzNz3M/s8+17nX/Fy8vLm9qO+92f+zk/e//tf3l5eXlTi/1bjZeXlzdl/3bj5eXlTdm/3Xh5eXlT9m83Xl5e3pT9242Xl5c3Zf924+Xl5U3Zv914eXl5U/ZvN15eXt6U/duNl5eXN2X/duPl5eVN2b/deHl53+sCraOVDYZXSjEAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDEtMjZUMTU6NTA6NTIrMDA6MDBLo1OjAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTAxLTI2VDE1OjUwOjUyKzAwOjAwOv7rHwAAAABJRU5ErkJggg==\"","import { Box } from '@mui/material'\r\nimport { DataGrid } from '@mui/x-data-grid'\r\nimport { FC } from 'react'\r\nimport { DotType } from '../../redux/threeReducer'\r\n\r\ninterface IProps {\r\n    dots: DotType[]\r\n    selectedDotsIds: (number | string)[]\r\n\r\n    setSelectedDotsIds(arr: (number | string)[]): void\r\n}\r\n\r\nconst CitiesList: FC<IProps> = props => {\r\n    return (\r\n        <Box style={{ width: '100%', marginTop: 15, height: 'inherit' }}>\r\n            <DataGrid\r\n                style={{ maxHeight: '90%', overflowY: 'auto' }}\r\n                // rule\r\n                autoHeight\r\n\r\n                // hideFooter={true}\r\n                hideFooter\r\n                columns={[\r\n                    { field: 'id' },\r\n                    { field: 'city' },\r\n                    { field: 'color' },\r\n                    { field: 'size' },\r\n                    { field: 'data' }\r\n                ]}\r\n                rows={props.dots.map(dot => ({\r\n                    id: dot.id,\r\n                    city: dot.city,\r\n                    color: dot.color,\r\n                    size: dot.size\r\n                }))}\r\n                checkboxSelection\r\n                selectionModel={props.selectedDotsIds}\r\n                onSelectionModelChange={(e) => {\r\n                    props.setSelectedDotsIds(e)\r\n                }}\r\n            />\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default CitiesList","import CloseIcon from '@mui/icons-material/Close';\r\nimport { Box, Button, FormControl, IconButton, InputLabel, MenuItem, Paper, Select, Slide, Slider, TextField, Typography } from '@mui/material';\r\nimport { FC, useEffect, useState } from 'react';\r\nimport { DotType, NoteModeType } from '../../redux/threeReducer';\r\nimport { Flex } from '../common/common';\r\nimport ColorPicker from './../common/ColorPicker';\r\n\r\ninterface IProps {\r\n    ids: (number | string)[]\r\n    dots: DotType[]\r\n    globalDotSize: number\r\n    globalDotColor: string\r\n    globalNoteMode: NoteModeType\r\n\r\n    setSelectedDotsIds(arr: (number | string)[]): void\r\n    setDots(arr: DotType[]): void\r\n}\r\n\r\nconst CityDetails: FC<IProps> = props => {\r\n\r\n    const cities = props.dots.filter(d => props.ids.includes(d.id))\r\n\r\n    const [size, setSize] = useState(cities.every(city => city.size === cities[0].size) ? (cities[0].size ? cities[0].size : props.globalDotSize) : props.globalDotSize)\r\n    const [color, setColor] = useState(cities.every(city => city.color === cities[0].color) ? (cities[0].color ? cities[0].color : props.globalDotColor) : props.globalDotColor)\r\n    const [note, setNote] = useState(cities.every(city => city.note === cities[0].note) ? (cities[0].note ? cities[0].note : '') : '')\r\n    const [noteMode, setNoteMode] = useState(cities.every(city => city.noteMode === cities[0].noteMode) ? (cities[0].noteMode ? cities[0].noteMode : props.globalNoteMode) : props.globalNoteMode)\r\n\r\n    useEffect(() => {\r\n        const cities = props.dots.filter(d => props.ids.includes(d.id))\r\n\r\n        setSize(cities.every(city => city.size === cities[0].size) ? (cities[0].size ? cities[0].size : props.globalDotSize) : props.globalDotSize)\r\n        setColor(cities.every(city => city.color === cities[0].color) ? (cities[0].color ? cities[0].color : props.globalDotColor) : props.globalDotColor)\r\n        setNote(cities.every(city => city.note === cities[0].note) ? (cities[0].note ? cities[0].note : '') : '')\r\n        setNoteMode(cities.every(city => city.noteMode === cities[0].noteMode) ? (cities[0].noteMode ? cities[0].noteMode : props.globalNoteMode) : props.globalNoteMode)\r\n    }, [props])\r\n\r\n    const applyChanges = () => {\r\n        const newDots = [...props.dots]\r\n\r\n        for (const dot of newDots) {\r\n            if (props.ids.includes(dot.id)) {\r\n                dot.size = size\r\n                dot.color = color\r\n                dot.noteMode = noteMode\r\n\r\n                if (note !== '')\r\n                    dot.note = note\r\n            }\r\n        }\r\n\r\n        props.setDots(newDots)\r\n        props.setSelectedDotsIds([])\r\n    }\r\n\r\n    return (\r\n        <Slide direction='down' in >\r\n            <Box style={{ position: 'absolute', left: 400 + 15, top: 0 }}>\r\n                <Paper style={{ position: 'relative', width: 250, display: 'flex', flexDirection: 'column', alignItems: 'center', padding: 25, paddingBottom: 10 }} elevation={10}>\r\n                    <Typography mb={2} variant='h6'>{cities.map(c => c.city).join(', ')}</Typography>\r\n\r\n                    <Flex fullWidth centerY sx={{ mb: 2, justifyContent: \"space-between\" }}>\r\n                        <Slider\r\n                            style={{ width: 150 }}\r\n                            step={.05}\r\n                            // marks\r\n                            min={0}\r\n                            max={3}\r\n                            value={size}\r\n                            valueLabelDisplay='auto'\r\n                            onChange={(e, v) => {\r\n                                if (typeof v == 'number')\r\n                                    setSize(v)\r\n                            }}\r\n                            onChangeCommitted={(e, v) => {\r\n                                // if (typeof v == 'number')\r\n                                //     props.setDotSize(v)\r\n                            }}\r\n                        />\r\n\r\n\r\n                        <TextField\r\n                            style={{ width: 80 }}\r\n                            label='Dots Size'\r\n                            variant='outlined'\r\n                            size='small'\r\n                            type='number'\r\n                            value={size}\r\n                            onChange={(e) => {\r\n                                let value = parseFloat(e.target.value)\r\n\r\n                                value = value > 1 ? 1 : (value < 0 ? 0 : value)\r\n\r\n                                setSize(value)\r\n                            }}\r\n                        />\r\n\r\n                    </Flex>\r\n\r\n                    <Flex fullWidth centerY sx={{ mb: 2, justifyContent: \"space-between\", gap: 2 }}>\r\n                        <TextField\r\n                            // style={{ width: 80 }}\r\n                            label='Note'\r\n                            variant='outlined'\r\n                            size='small'\r\n                            value={note}\r\n                            onChange={(e) => {\r\n                                setNote(e.target.value)\r\n                            }}\r\n                        />\r\n                        <ColorPicker size={40} color={color} handleColorSet={setColor} />\r\n                    </Flex>\r\n\r\n                    <Flex fullWidth centerY sx={{ justifyContent: 'space-between', mt: 2 }}>\r\n                        <Typography >Note Display Mode</Typography>\r\n                        <FormControl sx={{ width: 100 }} size='small'>\r\n                            <InputLabel id=\"demo-simple-select-label\">Mode</InputLabel>\r\n                            <Select\r\n                                labelId=\"demo-simple-select-label\"\r\n                                id=\"demo-simple-select\"\r\n                                value={noteMode}\r\n                                label=\"Mode\"\r\n                                onChange={e => {\r\n                                    setNoteMode(e.target.value as NoteModeType)\r\n                                }}\r\n                            >\r\n                                <MenuItem value='always'>Always</MenuItem>\r\n                                <MenuItem value='hover'>On Hover</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Flex>\r\n\r\n                    <Button onClick={applyChanges}>Apply</Button>\r\n\r\n                    <IconButton\r\n                        aria-label=\"close\"\r\n                        onClick={() => { props.setSelectedDotsIds([]) }}\r\n                        sx={{\r\n                            position: 'absolute',\r\n                            right: 8,\r\n                            top: 8,\r\n                            color: (theme) => theme.palette.grey[500],\r\n                        }}\r\n                    >\r\n                        <CloseIcon />\r\n                    </IconButton>\r\n                    {/* <Box sx={{ position: 'absolute', top: 0, right: 0, width: '100%', display: 'flex', justifyContent: \"space-between\", alignItems: 'center', gap: 1 }}>\r\n                    <Shift />\r\n                    <Fab sx={{ minWidth: fabSize, maxWidth: fabSize, minHeight: fabSize, maxHeight: fabSize }} color=\"error\"  >\r\n                        <CancelIcon />\r\n                    </Fab>\r\n                    <Fab sx={{ minWidth: fabSize, maxWidth: fabSize, minHeight: fabSize, maxHeight: fabSize }} color=\"success\"  >\r\n                        <CheckIcon />\r\n                    </Fab>\r\n                </Box> */}\r\n                </Paper>\r\n            </Box >\r\n        </Slide>\r\n\r\n    )\r\n}\r\n\r\nexport default CityDetails  ","import DeleteIcon from '@mui/icons-material/Delete'\r\nimport RestartAltIcon from '@mui/icons-material/RestartAlt'\r\nimport { Autocomplete, Box, Fab, FormControl, IconButton, InputLabel, MenuItem, Paper, Select, TextField, Tooltip, Typography } from '@mui/material'\r\nimport Slider from '@mui/material/Slider'\r\nimport { FC, useEffect, useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport cities from '../../assets/worldcities.json'\r\nimport { StateType } from '../../redux/store'\r\nimport { actions, DotType, NoteModeType } from '../../redux/threeReducer'\r\nimport ColorPicker from '../common/ColorPicker'\r\nimport { Flex } from '../common/common'\r\nimport CitiesList from './CitiesList'\r\nimport CityDetails from './CityDetails'\r\nimport ControlPointIcon from '@mui/icons-material/ControlPoint'\r\nimport GpsNotFixedIcon from '@mui/icons-material/GpsNotFixed'\r\n\r\ninterface IProps {\r\n    dots: DotType[]\r\n    dotColor: string\r\n    dotSize: number\r\n    selectedDotsIds: (number | string)[]\r\n    noteMode: NoteModeType\r\n\r\n    setDots(arr: DotType[]): void\r\n    addDot(value: DotType): void\r\n    setDotSize(value: number): void\r\n    setDotColor(value: string): void\r\n    setSelectedDotsIds(arr: (number | string)[]): void\r\n    removeDots(ids: (number | string)[]): void\r\n    resetDots(ids: (number | string)[]): void\r\n    setNoteMode(value: NoteModeType): void\r\n    setPointPickMode(value: boolean): void\r\n}\r\n\r\nconst Sidebar: FC<IProps> = (props) => {\r\n    const [sliderValue, setSliderValue] = useState(props.dotSize)\r\n\r\n    useEffect(() => {\r\n        setSliderValue(props.dotSize)\r\n    }, [props.dotSize])\r\n\r\n\r\n    return (\r\n        <Box top={0} left={0} m={2} sx={{ position: 'absolute' }}>\r\n            <Paper sx={{ width: 350, height: 852, display: 'flex', flexDirection: 'column', alignItems: 'center', padding: 3 }} elevation={10}>\r\n\r\n                <Flex fullWidth centerY sx={{ justifyContent: \"space-between\" }}>\r\n                    <Slider\r\n                        style={{ width: 180 }}\r\n                        step={.05}\r\n                        // marks\r\n                        min={0}\r\n                        max={3}\r\n                        value={sliderValue}\r\n                        valueLabelDisplay='auto'\r\n                        onChange={(e, v) => {\r\n                            if (typeof v == 'number')\r\n                                setSliderValue(v)\r\n                        }}\r\n                        onChangeCommitted={(e, v) => {\r\n                            if (typeof v == 'number')\r\n                                props.setDotSize(v)\r\n                        }}\r\n                    />\r\n\r\n\r\n                    <TextField\r\n                        style={{ width: 80 }}\r\n                        label='Dots Size'\r\n                        variant='outlined'\r\n                        size='small'\r\n                        type='number'\r\n                        value={props.dotSize}\r\n                        onChange={(e) => {\r\n                            let value = parseFloat(e.target.value)\r\n\r\n                            value = value > 1 ? 1 : (value < 0 ? 0 : value)\r\n\r\n                            props.setDotSize(value)\r\n                        }}\r\n                    />\r\n\r\n                    <ColorPicker size={40} color={props.dotColor} handleColorSet={props.setDotColor} />\r\n                </Flex>\r\n\r\n                <Flex fullWidth centerY sx={{ justifyContent: 'space-between', mt: 2 }}>\r\n                    <Typography >Note Display Mode</Typography>\r\n                    <FormControl sx={{ width: 185 }}>\r\n                        <InputLabel id=\"demo-simple-select-label\">Mode</InputLabel>\r\n                        <Select\r\n                            labelId=\"demo-simple-select-label\"\r\n                            id=\"demo-simple-select\"\r\n                            value={props.noteMode}\r\n                            label=\"Mode\"\r\n                            onChange={e => {\r\n                                props.setNoteMode(e.target.value as NoteModeType)\r\n                            }}\r\n                        >\r\n                            <MenuItem value='always'>Always</MenuItem>\r\n                            <MenuItem value='hover'>On Hover</MenuItem>\r\n                        </Select>\r\n                    </FormControl>\r\n                </Flex>\r\n\r\n                <Flex fullWidth centerY sx={{ gap: 2, mt: 2 }}>\r\n\r\n                    <Autocomplete\r\n                        style={{\r\n                            width: 290,\r\n                        }}\r\n                        // multiple\r\n                        id=\"tags-outlined\"\r\n                        options={cities}\r\n                        getOptionLabel={(cities) => cities.city}\r\n                        // defaultValue={props.dots}\r\n                        filterSelectedOptions\r\n                        onChange={(data, v) => {\r\n                            if (v && !(props.dots.filter(d => d.id === v.id).length > 0)) {\r\n                                props.addDot(v)\r\n                            }\r\n                            // props.setDots({ id: props.dots.length, ...v })\r\n                        }}\r\n                        renderInput={(params) => (\r\n                            <TextField\r\n                                {...params}\r\n                                variant=\"outlined\"\r\n                                label=\"Cities\"\r\n                                placeholder=\"Cities\"\r\n                            />\r\n                        )}\r\n                    />\r\n                    {/* <Fab size=\"small\" color='primary' onClick={() => { props.resetDots(props.selectedDotsIds) }}> <ControlPointIcon /></Fab> */}\r\n\r\n                    <IconButton title='Add custom point' size='medium' onClick={() => props.setPointPickMode(true)}>\r\n                        <GpsNotFixedIcon fontSize='medium' />\r\n                    </IconButton>\r\n                </Flex>\r\n                {\r\n                    props.selectedDotsIds.length > 0 &&\r\n                    <Flex fullWidth centerX centerY sx={{ gap: 2, mt: 2 }}>\r\n                        <Typography variant='h6'>Actions:</Typography>\r\n                        <Tooltip title='Reset selected to global design'>\r\n                            <Fab size=\"small\" color='primary' onClick={() => { props.resetDots(props.selectedDotsIds) }}> <RestartAltIcon /></Fab>\r\n                        </Tooltip>\r\n                        <Tooltip title='Delete selected'>\r\n                            <Fab size=\"small\" color='error' onClick={() => { props.removeDots(props.selectedDotsIds) }}> <DeleteIcon /></Fab>\r\n                        </Tooltip>\r\n                        {/* <Button>Reset</Button>\r\n                        <Button>Delete</Button> */}\r\n                    </Flex>\r\n                }\r\n                <CitiesList dots={props.dots} selectedDotsIds={props.selectedDotsIds} setSelectedDotsIds={props.setSelectedDotsIds} />\r\n\r\n                {\r\n                    props.selectedDotsIds.length > 0 &&\r\n                    <CityDetails\r\n                        ids={props.selectedDotsIds}\r\n                        dots={props.dots}\r\n                        globalDotColor={props.dotColor}\r\n                        globalDotSize={props.dotSize}\r\n                        globalNoteMode={props.noteMode}\r\n                        setSelectedDotsIds={props.setSelectedDotsIds}\r\n                        setDots={props.setDots}\r\n                    />\r\n                }\r\n\r\n\r\n            </Paper >\r\n        </Box >\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state: StateType) => ({\r\n    dotColor: state.threeReducer.dotColor,\r\n    dotSize: state.threeReducer.dotSize,\r\n    dots: state.threeReducer.dots,\r\n    selectedDotsIds: state.threeReducer.selectedDotsIds,\r\n    noteMode: state.threeReducer.noteMode\r\n})\r\n\r\nexport default connect(mapStateToProps, {\r\n    setDots: actions.setDots,\r\n    addDot: actions.addDot,\r\n    setDotSize: actions.setDotSize,\r\n    setDotColor: actions.setDotColor,\r\n    setSelectedDotsIds: actions.setSelectedDotsIds,\r\n    removeDots: actions.removeDots,\r\n    resetDots: actions.resetDots,\r\n    setNoteMode: actions.setNoteMode,\r\n    setPointPickMode: actions.setPointPickMode,\r\n})(Sidebar)","export default __webpack_public_path__ + \"static/media/spriteAlpha.1c25f1d2.png\";","import { Tooltip, Box, Paper } from '@mui/material'\r\nimport React, { FC, useEffect, useRef, useState } from 'react'\r\nimport { Object3D, PerspectiveCamera, Scene, Vector3 } from 'three'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\nimport { getScreenPos } from '../../common/helpers'\r\nimport { DotType } from '../../redux/threeReducer'\r\n\r\nexport type NoteType = {\r\n    id: number\r\n    position: Vector3\r\n    note: string\r\n}\r\n\r\ninterface IProps {\r\n    notes: NoteType[]\r\n    orbit: OrbitControls\r\n    camera: PerspectiveCamera\r\n    globus: Object3D\r\n\r\n    dots: DotType[]\r\n\r\n    updateDotsHintsPoses(): void\r\n}\r\n\r\nconst NoteViewer: FC<IProps> = ({ notes, ...props }) => {\r\n\r\n    useEffect(() => {\r\n        props.updateDotsHintsPoses()\r\n    })\r\n\r\n    return (\r\n        <>\r\n\r\n            {\r\n                notes.map(dot => {\r\n                    const pos = getScreenPos(dot.position, props.camera, window.innerWidth, window.innerHeight)\r\n                    // console.log(JSON.stringify(dot.position))\r\n                    // console.table(dot.id)\r\n\r\n                    return <Box id={\"note_\" + dot.id} className='note'\r\n                        sx={{\r\n                            position: 'absolute',\r\n                            top: pos.top - 15 + 'px',\r\n                            left: pos.left + 'px',\r\n                            // transitionDuration: '0.8s' ,\r\n                            transform: \"translate(-50%, -100%)\",\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            alignItems: 'center',\r\n                            transition: 'opacity 500ms ease 0s'\r\n                        }}\r\n                        key={dot.id}>\r\n                        <Paper sx={{\r\n                            p: 2,\r\n                        }}>\r\n                            {dot.note}\r\n                        </Paper>\r\n                        <Box sx={{\r\n                            width: 0,\r\n                            height: 0,\r\n                            borderLeft: '5px solid transparent',\r\n                            borderRight: '5px solid transparent',\r\n                            borderTop: '5px solid white',\r\n                        }}></Box>\r\n                    </Box>\r\n                    {/* <Box id={\"note_\" + dot.id} sx={{ position: 'absolute', top: pos.toppos.top + 'px', left: pos.left + 'px' }}></Box> */ }\r\n                    //\r\n                })\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default NoteViewer","import { CameraPositionType } from './../../redux/threeReducer'\r\nimport { MeshBasicMaterial } from 'three'\r\nimport { StateType } from '../../redux/store'\r\nimport { GlobeTextureType } from '../../redux/textureReducer'\r\nimport { actions, CameraActionsType, CoordType, DotType, NoteModeType, OrbitSettingsType } from '../../redux/threeReducer'\r\n\r\nexport interface IProps {\r\n    globeTexture: GlobeTextureType\r\n    rendererColor: string\r\n    orbitSettings: OrbitSettingsType\r\n    globusRadius: number\r\n    globusMaterial: MeshBasicMaterial\r\n    dots: DotType[]\r\n    coords: CoordType[]\r\n    dotSize: number\r\n    dotColor: string\r\n    noteMode: NoteModeType\r\n    atmosphereColor: string\r\n    cameraAction: CameraActionsType\r\n    cameraPosition: CameraPositionType\r\n    pointPickMode: boolean\r\n\r\n    setDots(arr: DotType[]): void\r\n    addCoord(coord: CoordType): void\r\n    setCameraPosition(value: CameraPositionType): void\r\n    setCameraAction(value: CameraActionsType): void\r\n    setPointPickMode(value: boolean): void\r\n    addDot(value: DotType): void\r\n}\r\n\r\nexport const mapStateToProps = (state: StateType) => ({\r\n    globeTexture: state.textureReducer.globeTexture,\r\n    rendererColor: state.threeReducer.rendererColor,\r\n    orbitSettings: state.threeReducer.orbitSettings,\r\n    globusRadius: state.threeReducer.globus.radius,\r\n    globusMaterial: state.threeReducer.globus.material,\r\n    dots: state.threeReducer.dots,\r\n    coords: state.threeReducer.coords,\r\n    dotColor: state.threeReducer.dotColor,\r\n    dotSize: state.threeReducer.dotSize,\r\n    noteMode: state.threeReducer.noteMode,\r\n    atmosphereColor: state.threeReducer.atmosphereColor,\r\n    cameraAction: state.threeReducer.cameraAction,\r\n    cameraPosition: state.threeReducer.cameraPosition,\r\n    pointPickMode: state.threeReducer.pointPickMode,\r\n})\r\n\r\nexport const mapDispatchToProps = {\r\n    setDots: actions.setDots,\r\n    addCoord: actions.addCoord,\r\n    setCameraPosition: actions.setCameraPosition,\r\n    setCameraAction: actions.setCameraAction,\r\n    setPointPickMode: actions.setPointPickMode,\r\n    addDot: actions.addDot,\r\n}\r\n","import React, { FC, useState } from 'react'\r\nimport { Button, Dialog, DialogActions, DialogTitle, TextField } from '@mui/material'\r\nimport DialogContent from '@mui/material/DialogContent'\r\nimport { DotType } from '../../redux/threeReducer'\r\n\r\ninterface IProps {\r\n    coord?: {\r\n        x: number\r\n        y: number\r\n        z: number\r\n    }\r\n    customDotsCount: number\r\n\r\n    closeCallback(): void\r\n    addDot(value: DotType): void\r\n}\r\n\r\nconst AddDotDialog: FC<IProps> = props => {\r\n\r\n    const [city, setCity] = useState('')\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n\r\n    const handleAddClick = () => {\r\n        if (city == '') {\r\n            setErrorMessage('City name can\\'t be empty')\r\n            return\r\n        }\r\n\r\n        props.addDot({\r\n            id: 'c' + (props.customDotsCount + 1),\r\n            city,\r\n            lat: 0,\r\n            lng: 0,\r\n            country: '',\r\n            position: props.coord\r\n        })\r\n        setCity('')\r\n        props.closeCallback()\r\n    }\r\n\r\n    return (\r\n        <Dialog\r\n            open={!!props.coord}\r\n        >\r\n            <DialogTitle>Confirm New Point</DialogTitle>\r\n            <DialogContent>\r\n                <TextField\r\n                    sx={{ mt: 1 }}\r\n                    label='City Name'\r\n                    value={city}\r\n                    onChange={(e => {\r\n                        setCity(e.target.value)\r\n                    })}\r\n                    error={!!errorMessage}\r\n                    helperText={errorMessage}\r\n                />\r\n\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button color='error' onClick={props.closeCallback}>Cancel</Button>\r\n                <Button onClick={handleAddClick}>Add</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default AddDotDialog","import CloseIcon from '@mui/icons-material/Close'\r\nimport { Box, Fab, Slide, Tooltip } from '@mui/material'\r\nimport Typography from '@mui/material/Typography'\r\nimport { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport * as THREE from 'three'\r\nimport { Color, HemisphereLight, Line3, MathUtils, Mesh, MeshBasicMaterial, Object3D, PerspectiveCamera, Plane, PlaneHelper, PointLight, Raycaster, RepeatWrapping, Scene, SphereGeometry, Sprite, SpriteMaterial, TextureLoader, Vector2, Vector3, WebGLRenderer } from 'three'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer'\r\nimport { OutlinePass } from 'three/examples/jsm/postprocessing/OutlinePass'\r\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass'\r\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass'\r\nimport { FXAAShader } from 'three/examples/jsm/shaders/FXAAShader'\r\nimport spriteAlpha from '../../assets/spriteAlpha.png'\r\nimport { blobToBase64, getScreenPos, srcToBase64 } from '../../common/helpers'\r\nimport { cameraDefaultPosition, CoordType, DotType, V3 } from '../../redux/threeReducer'\r\nimport NoteViewer, { NoteType } from './NoteViewer'\r\nimport { IProps, mapDispatchToProps, mapStateToProps } from './ThreeProps'\r\nimport HelpOutlineIcon from '@mui/icons-material/HelpOutline';\r\nimport AddDotDialog from './AddDotDialog'\r\n\r\ninterface IState {\r\n    notes: NoteType[]\r\n    coordNeedConfirm?: V3\r\n}\r\n\r\nclass Three extends Component<IProps, IState> {\r\n    myDiv: any\r\n    frameId: any\r\n\r\n    scene = new Scene()\r\n    camera = new PerspectiveCamera(4.5, window.innerWidth / window.innerHeight, 0.1, 20000)\r\n    renderer = new WebGLRenderer({ antialias: true, preserveDrawingBuffer: true, alpha: true })\r\n    orbit = new OrbitControls(this.camera, this.renderer.domElement)\r\n    isOrbitPaused = false\r\n\r\n    //Post Processing\r\n    composer = new EffectComposer(this.renderer)\r\n    outlinePass = new OutlinePass(new Vector2(window.innerWidth, window.innerHeight), this.scene, this.camera)\r\n    renderPass = new RenderPass(this.scene, this.camera)\r\n    effectFXAA = new ShaderPass(FXAAShader)\r\n\r\n    raycater = new Raycaster()\r\n    mouse = new Vector2()\r\n    isMouseDown = false\r\n\r\n    dots = [] as Array<Mesh>\r\n\r\n    alreadyIntersected = false\r\n    hoveredDot = null as Mesh | null\r\n    leapValue = null as number | null\r\n    needScale = null as Vector3 | null\r\n    alreadyScaling = false\r\n\r\n    globe = new Mesh(new SphereGeometry(this.props.globusRadius, 50, 50), this.props.globusMaterial)\r\n\r\n    sprite = new Sprite()\r\n\r\n    checkPoint = new Vector3(0, 0, this.props.globusRadius) //\r\n    checkPlane = new Plane(new Vector3(0, 0, 1))\r\n\r\n    light = new HemisphereLight(0xffffff, 0xffffff, 0.05)\r\n    light2 = new PointLight()\r\n\r\n    needRender = false\r\n\r\n    notes = [] as NoteType[]\r\n\r\n    state = {\r\n        notes: [] as NoteType[],\r\n        coordNeedConfirm: undefined\r\n    }\r\n\r\n    setNeedRender = (value: boolean) => { this.needRender = value }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener(\"resize\", this.handleWindowResize)\r\n        this.myDiv.addEventListener('pointerdown', (e: PointerEvent) => {\r\n            if (e.button === 0)\r\n                this.isMouseDown = true\r\n        })\r\n        this.myDiv.addEventListener('pointerup', (e: PointerEvent) => {\r\n            if (e.button === 0)\r\n                this.isMouseDown = false\r\n        })\r\n        this.myDiv.addEventListener('pointermove', this.onMouseMove)\r\n\r\n        this.orbit.addEventListener('change', (event) => {\r\n            this.needRender = true;\r\n            this.updateDotsHintsPoses()\r\n            //  this.setState({ notes: [...this.state.notes] }) \r\n        })\r\n\r\n        this.orbit.addEventListener('end', (event) => {\r\n            this.needRender = true;\r\n            this.updateDotsHintsPoses()\r\n            //  this.setState({ notes: [...this.state.notes] }) \r\n        })\r\n\r\n        this.handleWindowResize()\r\n\r\n        // @ts-ignore\r\n        window.scene = this.scene; window.camera = this.camera; window.Vector2 = Vector2; window.THREE = THREE; window.lt = this.getLatLng; window.f = (edgeGlow, edgeThickness, edgeStrength, color = '#8300e9') => {\r\n            this.outlinePass.edgeGlow = edgeGlow\r\n            this.outlinePass.visibleEdgeColor.set(color)\r\n            // this.outlinePass.hiddenEdgeColor.set('black') // default\r\n            this.outlinePass.edgeThickness = edgeThickness\r\n            // this.outlinePass.pulsePeriod = 0 // default \r\n            this.outlinePass.edgeStrength = edgeStrength\r\n            this.renderScene()\r\n\r\n            console.log(`edgeGlow -> ${this.outlinePass.edgeGlow} \\n edgeThickness -> ${this.outlinePass.edgeThickness} \\n edgeStrength -> ${this.outlinePass.edgeStrength}`)\r\n        }\r\n\r\n        // @ts-ignore\r\n        window.orbit = this.orbit; window.tthis = this; window.scene = this.scene; window.children = this.scene.children; window.globe = this.globe\r\n\r\n        this.myDiv.appendChild(this.renderer.domElement)\r\n        this.start()\r\n    }\r\n    componentWillUnmount() {\r\n        this.stop()\r\n        this.myDiv.removeChild(this.renderer.domElement)\r\n    }\r\n\r\n    componentDidUpdate(prevProps: IProps) {\r\n\r\n        if (\r\n            prevProps.dots !== this.props.dots || prevProps.coords !== this.props.coords\r\n            || prevProps.dotColor !== this.props.dotColor || prevProps.dotSize !== this.props.dotSize\r\n            || prevProps.noteMode !== this.props.noteMode\r\n        ) {\r\n            this.removeDots(this.dots)\r\n            this.dots = []\r\n            this.addDots(this.props.dots, this.props.coords)\r\n            this.outlinePass.selectedObjects = this.dots\r\n\r\n            this.notes = (this.globe.children.filter(child => child.name === 'Dot' && child.userData.note.visible && child.userData.note.value && child.userData.note.value !== '').map((child, i) => ({ id: i, note: child.userData.note, position: child.getWorldPosition(new Vector3()) })))\r\n\r\n            this.reAssignNotesVisible()\r\n\r\n            setTimeout(this.updateDotsHintsPoses, 100) //to fix unknown glitch\r\n\r\n            // this.saveStateInLocalStorage()\r\n        }\r\n\r\n        else if (prevProps.orbitSettings !== this.props.orbitSettings) {\r\n            // this.orbit.enableRotate = this.props.orbitSettings.enableRotate\r\n            this.orbit.enablePan = this.props.orbitSettings.enablePan\r\n            this.orbit.enableZoom = this.props.orbitSettings.enableZoom\r\n            // this.orbit.autoRotate = this.props.orbitSettings.autoRotate\r\n            // this.orbit.autoRotateSpeed = this.props.orbitSettings.autoRotateSpeed\r\n            // this.orbit.enableDamping = this.props.orbitSettings.enableDamping\r\n            // this.orbit.dampingFactor = this.props.orbitSettings.dampingFactor\r\n            // this.saveStateInLocalStorage()\r\n        }\r\n        else if (prevProps.rendererColor !== this.props.rendererColor) {\r\n            const rgb = this.props.rendererColor.slice(0, 7)\r\n            const a = this.props.rendererColor.slice(7)\r\n            let alpha = 1\r\n            if (a.length === 2) {\r\n                alpha = parseInt(a, 16) / 255\r\n            }\r\n            this.renderer.setClearColor(new Color(rgb), alpha)\r\n            // this.saveStateInLocalStorage()\r\n        }\r\n        else if (prevProps.atmosphereColor !== this.props.atmosphereColor) {\r\n            this.sprite.material.color = new Color(this.props.atmosphereColor)\r\n            // this.saveStateInLocalStorage()\r\n        }\r\n        else if (prevProps.cameraAction !== this.props.cameraAction && this.props.cameraAction !== 'none') {\r\n            if (this.props.cameraAction === 'save') {\r\n                this.orbit.saveState()\r\n                this.props.setCameraPosition({\r\n                    position: {\r\n                        x: this.orbit.position0.x,\r\n                        y: this.orbit.position0.y,\r\n                        z: this.orbit.position0.z\r\n                    },\r\n                    target: {\r\n                        x: this.orbit.target0.x,\r\n                        y: this.orbit.target0.y,\r\n                        z: this.orbit.target0.z\r\n                    },\r\n                    zoom: this.orbit.zoomO\r\n                })\r\n            }\r\n            else if (this.props.cameraAction === 'load') {\r\n                this.orbit.target0 = new Vector3(this.props.cameraPosition.target.x, this.props.cameraPosition.target.y, this.props.cameraPosition.target.z)\r\n                this.orbit.position0 = new Vector3(this.props.cameraPosition.position.x, this.props.cameraPosition.position.y, this.props.cameraPosition.position.z)\r\n                this.orbit.zoomO = this.props.cameraPosition.zoom\r\n                this.orbit.reset()\r\n            }\r\n            else {//reset\r\n                this.orbit.target0 = new Vector3(cameraDefaultPosition.target.x, cameraDefaultPosition.target.y, cameraDefaultPosition.target.z)\r\n                this.orbit.position0 = new Vector3(cameraDefaultPosition.position.x, cameraDefaultPosition.position.y, cameraDefaultPosition.position.z)\r\n                this.orbit.zoomO = cameraDefaultPosition.zoom\r\n                this.orbit.reset()\r\n                this.props.setCameraPosition({ ...cameraDefaultPosition })\r\n            }\r\n            this.props.setCameraAction('none')\r\n        }\r\n\r\n\r\n        if (prevProps.globeTexture !== this.props.globeTexture) {\r\n            this.globe.material.map = this.props.globeTexture.texture\r\n            this.globe.material.map.wrapS = RepeatWrapping\r\n            this.globe.material.map.wrapT = RepeatWrapping\r\n            this.globe.material.map.offset.set(0.25, 0)\r\n            this.globe.material.needsUpdate\r\n\r\n            this.saveGlobeTextureInLocalStorage()\r\n\r\n            this.renderSceneWithTimeout()\r\n        }\r\n\r\n        this.saveStateInLocalStorage()\r\n        this.renderScene()\r\n    }\r\n\r\n    saveStateInLocalStorage = () => {\r\n        localStorage.setItem('dots', JSON.stringify(this.props.dots))\r\n        localStorage.setItem('dotsProps', JSON.stringify({ size: this.props.dotSize, color: this.props.dotColor, noteMode: this.props.noteMode }))\r\n        localStorage.setItem('orbitSettings', JSON.stringify(this.props.orbitSettings))\r\n        localStorage.setItem('cameraPosition', JSON.stringify(this.props.cameraPosition))\r\n        localStorage.setItem('rendererColor', this.props.rendererColor)\r\n        localStorage.setItem('atmosphereColor', this.props.atmosphereColor)\r\n    }\r\n\r\n    saveGlobeTextureInLocalStorage = async () => {\r\n        if (this.props.globeTexture.src.startsWith('/')) {\r\n            localStorage.setItem('globeTexture', this.props.globeTexture.src)\r\n        }\r\n        else {\r\n            // const blob = await fetch().then(r => r.blob())\r\n            // const dataUrl = await blobToBase64(blob) as string\r\n            const dataUrl = await srcToBase64(this.props.globeTexture.src)\r\n            localStorage.setItem('globeTexture', dataUrl)\r\n        }\r\n    }\r\n\r\n    init = () => {\r\n        const rgb = this.props.rendererColor.slice(0, 7)\r\n        const a = this.props.rendererColor.slice(7)\r\n        let alpha = 1\r\n        if (a.length === 2) {\r\n            alpha = parseInt(a, 16) / 255\r\n        }\r\n        this.renderer.setClearColor(new Color(rgb), alpha)\r\n        // this.renderer.alpha = true\r\n\r\n        // Controlers settings\r\n        this.orbit.enableRotate = false//this.props.orbitSettings.enableRotate\r\n        this.orbit.enablePan = this.props.orbitSettings.enablePan\r\n        this.orbit.enableZoom = this.props.orbitSettings.enableZoom\r\n        // this.orbit.autoRotate = this.props.orbitSettings.autoRotate\r\n        // this.orbit.autoRotateSpeed = this.props.orbitSettings.autoRotateSpeed\r\n        // this.orbit.enableDamping = this.props.orbitSettings.enableDamping\r\n        // this.orbit.dampingFactor = this.props.orbitSettings.dampingFactor\r\n        this.orbit.minPolarAngle = Math.PI / 2\r\n        this.orbit.maxPolarAngle = Math.PI / 2\r\n\r\n\r\n        this.camera.position.set(0, 5, 107)\r\n        this.camera.lookAt(0, this.props.globusRadius * .7, 0)\r\n        this.orbit.target = new Vector3(0, this.props.globusRadius * 0.7, 0)\r\n\r\n        this.orbit.target0 = new Vector3(this.props.cameraPosition.target.x, this.props.cameraPosition.target.y, this.props.cameraPosition.target.z)\r\n        this.orbit.position0 = new Vector3(this.props.cameraPosition.position.x, this.props.cameraPosition.position.y, this.props.cameraPosition.position.z)\r\n        this.orbit.zoomO = this.props.cameraPosition.zoom\r\n        this.orbit.reset()\r\n\r\n        // new TextureLoader().load(globusTexture, (texture) => {\r\n        // new TextureLoader().load(spriteTexture, (sTexture) => {\r\n        new TextureLoader().load(spriteAlpha, (sTexture2) => {\r\n            const globusMaterial = this.globe.material as MeshBasicMaterial\r\n            // debugger\r\n            globusMaterial.map = this.props.globeTexture.texture\r\n            globusMaterial.map.wrapS = RepeatWrapping\r\n            globusMaterial.map.wrapT = RepeatWrapping\r\n            globusMaterial.map.offset.set(0.25, 0)\r\n\r\n            this.scene.add(this.globe)\r\n            this.addDots(this.props.dots, this.props.coords)\r\n            this.outlinePass.selectedObjects = this.dots\r\n\r\n            this.sprite.material = new SpriteMaterial({ color: this.props.atmosphereColor, alphaMap: sTexture2, transparent: true, alphaTest: 0 });\r\n            // this.sprite.scale.set(this.props.globusRadius * 2 * 1.15, this.props.globusRadius * 2 * 1.15, 1)\r\n            this.sprite.scale.set(this.props.globusRadius * 2 * 1.1, this.props.globusRadius * 2 * 1.1, 1)\r\n            this.scene.add(this.sprite)\r\n            this.needRender = true\r\n\r\n            this.props.setDots([...this.props.dots])\r\n        })\r\n        // })\r\n        // })\r\n\r\n        // this.scene.add(new PlaneHelper(this.checkPlane))\r\n        // if (globusMaterial.map) {\r\n\r\n        // }\r\n\r\n        // this.addGlitchEffect()\r\n\r\n        // Scene ADDs\r\n\r\n        this.initOutline()\r\n        this.renderScene()\r\n    }\r\n\r\n    addGlitchEffect = () => {\r\n        this.dots.forEach(dot => {\r\n            dot.add(new Mesh(\r\n                // @ts-ignore\r\n                new SphereGeometry(1.5 * dot.geometry.parameters.radius, 50, 50),\r\n                new MeshBasicMaterial({\r\n                    color: '#8300e9',\r\n                    transparent: true,\r\n                    opacity: 0.07\r\n\r\n                }) //d.color })\r\n            ))\r\n        })\r\n    }\r\n\r\n    initOutline = () => {\r\n        //Outline settings\r\n        this.outlinePass.visibleEdgeColor.set('#330089')\r\n\r\n        this.outlinePass.edgeGlow = 0\r\n        this.outlinePass.hiddenEdgeColor.set('black')\r\n        this.outlinePass.edgeThickness = 3\r\n        this.outlinePass.edgeStrength = 5\r\n\r\n        //         f(0,3,5,'#6900ff')\r\n        // Three.tsx:76 edgeGlow -> 0 \r\n        //  edgeThickness -> 3 \r\n        //  edgeStrength -> 5\r\n        // undefined\r\n        // f(0,3,5,'#330089')\r\n\r\n        this.composer.addPass(this.renderPass)\r\n        this.composer.addPass(this.outlinePass)\r\n        this.composer.addPass(this.effectFXAA)\r\n    }\r\n\r\n    addDots = (dots: Array<DotType>, coords: Array<CoordType>) => {\r\n        dots.forEach(d => {\r\n\r\n            const R = this.props.globusRadius\r\n\r\n            const pos = d.position ? d.position : this.getPosition(d.lat, d.lng, R)\r\n\r\n            const r = (d.size ? d.size : this.props.dotSize) * 0.1\r\n            // const r = d.small ? 0.03 : 0.1\r\n\r\n            const dot = new Mesh(\r\n                new SphereGeometry(r, 50, 50),\r\n                new MeshBasicMaterial({ color: d.color ? d.color : this.props.dotColor }) //d.color })\r\n            )\r\n\r\n            dot.name = 'Dot'\r\n            dot.userData = {\r\n                props: d,\r\n                note: {\r\n                    value: d.note,\r\n                    visible: d.noteMode ? (d.noteMode === 'always' ? true : false) : (this.props.noteMode === 'always' ? true : false)\r\n                }\r\n            }\r\n\r\n            // if (d.note)\r\n            //     dot.add(createHintObject(d.note))\r\n\r\n            dot.position.set(pos.x, pos.y, pos.z)\r\n\r\n            this.globe.add(dot)\r\n            this.dots.push(dot)\r\n\r\n        })\r\n\r\n        coords.forEach(c => {\r\n            const r = c.big ? 0.1 : 0.03\r\n\r\n            const dot = new Mesh(\r\n                new SphereGeometry(r, 25, 25),\r\n                new MeshBasicMaterial({ color: '#8300e9' }) //d.color })\r\n            )\r\n\r\n            dot.position.set(c.x, c.y, c.z)\r\n\r\n            this.scene.add(dot)\r\n            this.dots.push(dot)\r\n        })\r\n    }\r\n\r\n    removeDots = (dots: Array<Mesh>) => {\r\n        dots.forEach(dot => {\r\n            this.globe.remove(dot)\r\n\r\n            dot.geometry.dispose()\r\n            const material = dot.material as MeshBasicMaterial\r\n            material.dispose()\r\n        })\r\n    }\r\n\r\n    getPosition = (latitude: number, longitude: number, radius: number): any => {\r\n        //Convert longitude and latitude to rad coordinates\r\n        var lg = MathUtils.degToRad(longitude);\r\n        var lt = MathUtils.degToRad(latitude);\r\n        var temp = radius * Math.cos(lt);\r\n\r\n        //Get x, y, Z coordinates\r\n        var x = temp * Math.sin(lg);\r\n        var y = radius * Math.sin(lt);\r\n        var z = temp * Math.cos(lg);\r\n\r\n        return {\r\n            x: x,\r\n            y: y,\r\n            z: z\r\n        }\r\n    }\r\n\r\n    reAssignNotesVisible = () => {\r\n        for (const dot of this.dots) {\r\n            const dProps = dot.userData.props\r\n            dot.userData.note.visible = dProps.noteMode ? (dProps.noteMode === 'always' ? true : false) : (this.props.noteMode === 'always' ? true : false)\r\n        }\r\n\r\n        this.updateDotsHintsPoses()\r\n        this.setState({ notes: [] }) //make rerender component\r\n    }\r\n\r\n    rotateMultiplier = 3\r\n\r\n    onMouseMove = (e: MouseEvent) => {\r\n\r\n        if (this.renderer.domElement.parentElement) {\r\n            const prevMouse = { ...this.mouse }\r\n\r\n            this.mouse.x = ((e.clientX - this.renderer.domElement.parentElement.offsetLeft) / this.renderer.domElement.clientWidth) * 2 - 1\r\n            this.mouse.y = - ((e.clientY - this.renderer.domElement.parentElement.offsetTop) / this.renderer.domElement.clientHeight) * 2 + 1\r\n\r\n\r\n            if (this.isMouseDown && this.props.orbitSettings.enableRotate && !this.props.pointPickMode) {\r\n                const deltaX = prevMouse.x - this.mouse.x\r\n                const deltaY = prevMouse.y - this.mouse.y\r\n                this.globe.rotateY(-deltaX * this.rotateMultiplier)\r\n                this.updateDotsHintsPoses()\r\n\r\n                // this.globus.rotateX(deltaY * this.rotateMultiplier)\r\n                this.needRender = true\r\n            }\r\n        }\r\n\r\n\r\n        this.raycater.setFromCamera(this.mouse, this.camera)\r\n\r\n        let intersected = this.raycater.intersectObjects(this.dots)\r\n        if (intersected.length > 0 && !this.alreadyScaling) {\r\n            this.hoveredDot = intersected[0].object as Mesh\r\n            this.leapValue = 0\r\n            this.needScale = new Vector3(1.2, 1.2, 1.2)\r\n            this.alreadyScaling = true\r\n\r\n            this.hoveredDot.userData.note.visible = true\r\n            this.updateDotsHintsPoses()\r\n            // if (this.state.notes.findIndex(d => d.id === intersected[0].object.userData.id) === -1) {\r\n            //     const data = intersected[0].object.userData\r\n            //     this.setState({\r\n            //         notes: [...this.state.notes, { id: data.id, position: intersected[0].object.position, note: data.note }]\r\n            //     })\r\n            // }\r\n            this.alreadyIntersected = true\r\n            this.setState({ notes: [] })\r\n        }\r\n        else if (!this.alreadyScaling) {\r\n            if (this.hoveredDot) {\r\n                this.leapValue = 0\r\n                this.needScale = new Vector3(1, 1, 1)\r\n                this.alreadyScaling = true\r\n\r\n                // this.lerpHoverdDot(1, -0.05)\r\n            }\r\n        }\r\n\r\n        if (intersected.length === 0 && this.alreadyIntersected) {\r\n\r\n            // for (const dot of this.dots) {\r\n            //     dot.userData.note.visible = false\r\n\r\n            //     if()\r\n            // }\r\n            this.reAssignNotesVisible()\r\n            this.alreadyIntersected = false\r\n        }\r\n\r\n\r\n        // if (intersected.length === 0 && this.state.notes.length > 0) {\r\n        //     this.setState({ notes: [] })\r\n        // }\r\n    }\r\n\r\n    lerpHoverdDot = (scale: number, alpha = 0.05) => {\r\n        if (this.hoveredDot) {\r\n            if (\r\n                (parseFloat(this.hoveredDot.scale.x.toFixed(2)) < scale && alpha > 0) ||\r\n                (parseFloat(this.hoveredDot.scale.x.toFixed(2)) > scale && alpha < 0)\r\n            )\r\n                this.hoveredDot.scale.setScalar(this.hoveredDot.scale.x + alpha)\r\n            this.renderScene()\r\n            if (alpha > 0) {\r\n                if (parseFloat(this.hoveredDot.scale.x.toFixed(2)) < scale) {\r\n                    window.requestAnimationFrame(() => { this.lerpHoverdDot(scale) })\r\n                }\r\n            }\r\n            else {\r\n                if (parseFloat(this.hoveredDot.scale.x.toFixed(2)) > scale) {\r\n                    window.requestAnimationFrame(() => { this.lerpHoverdDot(scale, -0.01) })\r\n                }\r\n                else {\r\n                    this.hoveredDot = null\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onMouseDown = () => {\r\n        // this.isMouseDown = true\r\n\r\n        if (this.props.pointPickMode) {\r\n\r\n            this.raycater.setFromCamera(this.mouse, this.camera)\r\n\r\n            let intersected = this.raycater.intersectObject(this.globe)\r\n            if (intersected.length) {\r\n                // const intersectedMesh = intersected[0].object as Mesh\r\n\r\n                const obj = new Object3D()\r\n                obj.position.set(intersected[0].point.x, intersected[0].point.y, intersected[0].point.z)\r\n                // console.log(obj.position);\r\n\r\n                const parentObj = new Object3D()\r\n                parentObj.rotation.y = 0\r\n                parentObj.add(obj)\r\n                parentObj.rotation.set(-this.globe.rotation.x, -this.globe.rotation.y, -this.globe.rotation.z)\r\n\r\n                const point = new Vector3()\r\n                obj.getWorldPosition(point)\r\n                // console.log(point);\r\n\r\n\r\n                const newCoord = {\r\n                    x: point.x,\r\n                    y: point.y,\r\n                    z: point.z\r\n                }\r\n\r\n                this.setState({ coordNeedConfirm: newCoord })\r\n                // this.props.addCoord(newCoord)\r\n                // console.log(intersected, newCoord)\r\n            }\r\n        }\r\n    }\r\n\r\n    updateDotsHintsPoses = () => {\r\n        this.notes = (this.globe.children.filter(child => child.name === 'Dot' && child.userData.note.visible && child.userData.note.value && child.userData.note.value !== '').map((child, i) => ({ id: i, note: child.userData.note, position: child.getWorldPosition(new Vector3()) })))\r\n\r\n        for (let i = 0; i < this.notes.length; i++) {\r\n\r\n            const noteEl = document.getElementById('note_' + i)\r\n            const pos = getScreenPos(this.notes[i].position, this.camera, window.innerWidth, window.innerHeight)\r\n\r\n            if (noteEl) {\r\n                noteEl.style.left = pos.left + 'px'\r\n                noteEl.style.top = pos.top + 'px'\r\n\r\n\r\n                const line = new Line3(this.checkPoint, this.notes[i].position)\r\n\r\n                if (this.checkPlane.intersectsLine(line)) {\r\n                    noteEl.style.opacity = '0'\r\n                }\r\n                else {\r\n                    noteEl.style.opacity = '1'\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    handleWindowResize = () => {\r\n        const width = window.innerWidth\r\n        const height = window.innerHeight\r\n\r\n        this.renderer.setSize(width, height)\r\n\r\n        this.composer.setSize(width, height)\r\n        this.effectFXAA.uniforms['resolution'].value.set(1 / width, 1 / height)\r\n\r\n        this.outlinePass.resolution = new Vector2(width, height)\r\n\r\n        this.camera.aspect = width / height\r\n        this.camera.updateProjectionMatrix()\r\n\r\n\r\n    }\r\n\r\n    start = () => {\r\n        this.init()\r\n        if (!this.frameId) {\r\n            this.frameId = requestAnimationFrame(this.animate)\r\n        }\r\n    }\r\n\r\n    stop = () => {\r\n        cancelAnimationFrame(this.frameId)\r\n        window.removeEventListener(\"resize\", this.handleWindowResize)\r\n        this.orbit.dispose()\r\n    }\r\n\r\n    rotateSpeedMultiplier = 0.002\r\n\r\n    animate = () => {\r\n\r\n        if (this.props.orbitSettings.autoRotate || this.props.orbitSettings.enableDamping) {\r\n\r\n            if (this.props.orbitSettings.autoRotate && !this.props.pointPickMode) {\r\n                this.globe.rotateY(this.rotateSpeedMultiplier * this.props.orbitSettings.autoRotateSpeed)\r\n                this.updateDotsHintsPoses()\r\n            }\r\n\r\n            this.renderScene()\r\n        }\r\n        else if (this.needRender) {\r\n            this.renderScene()\r\n            this.needRender = false\r\n        }\r\n\r\n        if (this.hoveredDot !== null && this.needScale !== null && this.leapValue !== null) {\r\n\r\n            this.hoveredDot.scale.lerp(this.needScale, this.leapValue)\r\n\r\n            // console.log(this.hoveredDot.scale.x, this.lerpValue)\r\n\r\n            if (this.hoveredDot.scale.x === this.needScale.x) {\r\n\r\n                if (this.hoveredDot.scale.x === 1) {\r\n                    this.hoveredDot = null\r\n                    this.leapValue = null\r\n                    this.needScale = null\r\n                }\r\n\r\n                this.alreadyScaling = false\r\n            }\r\n            else\r\n                this.leapValue += 0.1\r\n\r\n            this.renderScene()\r\n        }\r\n\r\n        this.frameId = window.requestAnimationFrame(this.animate)\r\n    }\r\n\r\n    renderSceneWithTimeout = (time = 500) => {\r\n        setTimeout(() => {\r\n            this.renderScene()\r\n        }, time)\r\n    }\r\n\r\n    renderScene = () => {\r\n        this.renderer.render(this.scene, this.camera)\r\n        this.orbit.update()\r\n        this.composer.render()\r\n    }\r\n\r\n    render() {\r\n        return <>\r\n            <div\r\n                onClick={this.onMouseDown}\r\n                className={'three'}\r\n                style={{ position: \"relative\" }} ref={(mount) => { this.myDiv = mount }}\r\n            ></div>\r\n            <NoteViewer camera={this.camera} globus={this.globe} orbit={this.orbit} dots={this.props.dots}\r\n                updateDotsHintsPoses={this.updateDotsHintsPoses}\r\n                notes={this.globe.children.filter(child => {\r\n                    if (child.name === 'Dot' && child.userData.note.visible && child.userData.note.value && child.userData.note.value !== '')\r\n                        return true\r\n                    else return false\r\n                })\r\n                    .map((child, i) => ({ id: i, note: child.userData.note.value, position: child.getWorldPosition(new Vector3()) }))}\r\n            />\r\n            <Slide direction=\"down\" in={this.props.pointPickMode}>\r\n                <Box sx={{\r\n                    position: 'absolute',\r\n                    top: 5,\r\n                    width: 1,\r\n                    display: 'flex',\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    gap: 1\r\n                }}>\r\n                    <Typography variant='h6'>Point Pick Mode</Typography>\r\n                    <Tooltip title='Click on globe to place point'>\r\n                        <HelpOutlineIcon color='inherit' />\r\n                    </Tooltip>\r\n                    <Fab\r\n                        sx={{ ml: 1 }}\r\n                        size='small'\r\n                        color='primary'\r\n                        onClick={() => this.props.setPointPickMode(false)}\r\n                    >\r\n                        <CloseIcon />\r\n                    </Fab>\r\n                </Box>\r\n            </Slide>\r\n\r\n            <AddDotDialog\r\n                customDotsCount={this.props.dots.filter(d => (typeof d.id === 'string' && d.id[0] === 'c')).length}\r\n                coord={this.state.coordNeedConfirm}\r\n                closeCallback={() => this.setState({ coordNeedConfirm: undefined })}\r\n                addDot={this.props.addDot}\r\n            />\r\n            {/* {\r\n                this.state.notes.map(dot => {\r\n                    const pos = getScreenPos(dot.position, this.camera, window.innerWidth, window.innerHeight)\r\n\r\n                    return <Tooltip title={dot.note} placement='top' arrow open disableHoverListener>\r\n                        <Box sx={{ position: 'absolute', top: pos.top + 'px', left: pos.left + 'px' }}></Box>\r\n                    </Tooltip>\r\n                })\r\n            } */}\r\n        </>\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Three)","import { FC } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Error from './common/Error';\r\nimport Settings from './components/Sidebar/Settings';\r\nimport Sidebar from './components/Sidebar/Sidebar';\r\nimport Three from './components/Three/Three';\r\nimport { StateType } from './redux/store';\r\nimport PreviewIcon from '@mui/icons-material/Preview';\r\nimport { IconButton, Tooltip } from '@mui/material'\r\nimport { actions } from './redux/threeReducer';\r\n\r\ninterface IProps {\r\n  isDevelopment: boolean\r\n  errorMessage: string\r\n  pointPickMode: boolean\r\n\r\n  setDevelopmentMode(v: boolean): void\r\n}\r\n\r\nconst App: FC<IProps> = props => {\r\n  return (\r\n    <div className=\"App\">\r\n      <Three />\r\n      {(props.isDevelopment && !props.pointPickMode) && <>\r\n        <Sidebar />\r\n        <Settings />\r\n      </>}\r\n      {process.env.REACT_APP_MODE === 'development' && <Tooltip title={`${props.isDevelopment ? 'Enter' : 'Exit'} Preview Mode`} placement='left'>\r\n        <IconButton sx={{ position: 'absolute', bottom: 15, right: 15 }} onClick={() => { props.setDevelopmentMode(!props.isDevelopment) }}><PreviewIcon /></IconButton>\r\n      </Tooltip>}\r\n      {props.errorMessage !== '' && <Error message={props.errorMessage} />}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect((state: StateType) => ({\r\n  isDevelopment: state.threeReducer.isDevelopment,\r\n  errorMessage: state.threeReducer.errorMessage,\r\n  pointPickMode: state.threeReducer.pointPickMode,\r\n}), {\r\n  setDevelopmentMode: actions.setDevelopmentMode\r\n})(App)\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import { createStore, combineReducers, applyMiddleware, compose } from \"redux\"\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport threeReducer from \"./threeReducer\"\r\nimport textureReducer from \"./textureReducer\"\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n    threeReducer,\r\n    textureReducer\r\n})\r\n\r\nexport type StateType = ReturnType<typeof rootReducer>\r\nexport type InferActionsType<T> = T extends { [keys: string]: (...args: any[]) => infer U } ? U : never\r\n\r\n// @ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\nconst store = createStore(rootReducer, composeEnhancers(\r\n    applyMiddleware(thunkMiddleware)\r\n))\r\n\r\nexport default store","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App'\r\nimport reportWebVitals from './reportWebVitals'\r\nimport { Provider } from 'react-redux'\r\nimport store from './redux/store'\r\nimport { SnackbarProvider } from 'notistack'\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <SnackbarProvider>\r\n      <App />\r\n    </SnackbarProvider>\r\n  </Provider>\r\n  , document.getElementById('root')\r\n)\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals()\r\n"],"sourceRoot":""}